<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="fav.png">
    <title>Idleon Masterclass Time Calculator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --bg-color: #1f2023;
            --card-bg: #2a2c30;
            --text-color: #e0e0e0;
            --primary-color: #1daa59; 
            --primary-color-dark: #1a8748;
            --primary-color-light: #77cb9b;
            --secondary-color: #f1c40f; 
            --border-color: #3a3d42;
            --locked-border-color: #e74c3c;
            --shadow-color: rgba(0, 0, 0, 0.2);
            --dark-text-color: #1f1f22;
            --femur-color: #D3C5A0;
            --ribcage-color: #e0e0e0;
            --cranium-color: #827C6A;
            --bovinae-color: #cd7f32;

            --purple-color: #9b59b6;
            --brown-color: #a0522d;
            --green-color: #2ecc71;
            --red-color: #e74c3c;
            --silver-color: #bdc3c7;
            --gold-color: #f1c40f;

            --border-radius: 12px;
            --transition-speed: 0.3s;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at 1px 1px, rgba(255, 255, 255, 0.05) 1px, transparent 0);
            background-size: 20px 20px;
            color: var(--text-color);
            margin: 0;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            line-height: 1.6;
        }

        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            font-weight: 600;
            text-shadow: 1px 1px 3px var(--shadow-color);
        }
        h2 {
            margin-top: 0;
        }
        h3 {
            margin: 0 0 0.75rem 0;
            color: var(--secondary-color);
            font-size: 1.2em;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        p {
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border-color);
            flex-wrap: nowrap;
            overflow-x: auto;   
            scrollbar-width: none; 
        }
        .tabs::-webkit-scrollbar {
            display: none; 
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.1em;
            font-weight: 600;
            opacity: 0.7;
            transition: all var(--transition-speed) ease;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
            white-space: nowrap;
        }
        .tab-button:hover {
            opacity: 1;
            color: var(--primary-color);
        }
        .tab-button.active {
            opacity: 1;
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
            width: 100%;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tab-content.active {
            display: block;
        }

        .container {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            gap: 2rem;
            justify-content: center;
            width: 100%;
        }
        .main-content {
            flex: 3;
            min-width: 0; 
        }
        .sidebar {
            flex: 1;
            min-width: 320px;
            align-self: flex-start;
            position: sticky; 
            top: 2rem;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px var(--shadow-color);
            transition: all var(--transition-speed) ease;
        }
        .item-card.locked {
            opacity: 0.6;
            border-color: var(--locked-border-color);
            filter: grayscale(0.5);
        }

        .item-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }
        .item-card {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 1rem;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            font-size: 0.95em;
        }
        .production-grid, .manual-unlock-grid {
            display: grid;
            gap: 1rem;
        }
        .production-grid .info-row .coin-label{
            width: 150px;
            display: flex;
            align-items: center;
        }
        .manual-unlock-grid {
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }
        .manual-unlock-grid .info-row {
            justify-content: flex-start;
        }

        input[type="text"], textarea {
            background-color: #333;
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.75rem;
            font-size: 1em;
            font-family: inherit;
            transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            width: 100%;
            box-sizing: border-box;
        }
        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.3);
        }
        .production-grid input[type="text"] {
            width: 100%;
            text-align: right;
        }
        .search-input-field {
            text-align: left;
        }

        .level-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .level-control input { width: 100px; text-align: center; padding: 0.5rem; }

        .level-btn, #import-submit-btn {
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all var(--transition-speed) ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .level-btn {
            background-color: var(--primary-color);
            width: 35px;
            height: 35px;
            font-size: 1.5em;
            line-height: 1; 
        }
        .level-btn:hover:not(:disabled) {
            background-color: var(--primary-color-dark);
        }
        .level-btn.down { background-color: #c0392b; }
        .level-btn.down:hover:not(:disabled) { background-color: #a93226; }
        .level-btn:active:not(:disabled) {
            transform: translateY(0);
        }
        .level-btn:disabled, input:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        #import-submit-btn {
            width: 100%;
            padding: 0.8rem 1rem;
            font-size: 1.2em;
            background-color: var(--primary-color);
        }
        #import-submit-btn:hover {
            background-color: var(--primary-color-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(46, 204, 113, 0.2);
        }
        #import-textarea {
            width: 100%;
            min-height: 150px;
            resize: vertical;
            margin-bottom: 1rem;
        }

        .top-list ol {
            padding-left: 0;
            margin: 0;
            list-style: none;
            counter-reset: top-list-counter;
        }
        .top-list li {
            background-color: #333;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all var(--transition-speed) ease;
            border-left: 4px solid transparent;
            counter-increment: top-list-counter;
        }
        .top-list-item-content {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-grow: 1;
            min-width: 0; 
        }

        .top-list-level-up-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 26px;
            height: 26px;
            font-size: 1.4em;
            line-height: 1;
            font-weight: bold;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            margin-left: 1rem;
            flex-shrink: 0; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .top-list-level-up-btn:hover {
            background-color: var(--primary-color-dark);
            transform: scale(1.1);
        }
        .top-list li::before {
            content: counter(top-list-counter);
            font-weight: 700;
            color: var(--primary-color);
            margin-right: 1rem;
            font-size: 1.1em;
        }
        .top-list-item-name{
            width:100%;
        }
        .top-list-details {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .top-list-details .coin-icon-img {
            margin-right: 8px;
            margin-left: 0;
        }
        .coin-label .coin-icon-img {
            margin-right: 8px;
            margin-left: 0;
        }
        .time {
            font-weight: bold;
            color: var(--secondary-color);
            margin-left: 10px;
            flex-shrink: 0;
        }
        .coin-icon-img {
            width: 36px;
            height: 36px;
            vertical-align: middle;
            margin-left: 6px;
            object-position: 0px -6px;
        }

        .total-level-display {
            text-align: center;
            margin-bottom: 1.5rem;
            background-color: var(--card-bg);
            padding: 1rem;
            border-top: 4px solid var(--primary-color); 
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }
        .total-level-display {
            text-align: center;
            margin-bottom: 1.5rem;
            background-color: var(--card-bg);
            padding: 1rem;
            border-top: 4px solid var(--primary-color); 
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap; 
        }
        .total-level-display h2 {
            color: var(--text-color); 
            margin: 0; 
        }
        .total-level-display p {
            margin: 0; 
            text-align: right;
        }
        .unlock-text { font-size: 0.8em; opacity: 0.8; }
        hr { border: 0; height: 1px; background-color: var(--border-color); margin: 2rem 0;}
        .controls-container {
            max-width: 100%;
            margin: 0 auto 2rem auto;
        }

        .controls-wrapper {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            align-items: stretch;
        }

        #compass-category-filters {
            border-top: 1px solid var(--border-color);
            padding-top: 1.5rem;
        }

        .filter-controls,
        #compass-category-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .filter-label {
            position: relative;
        }

        .filter-label input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            cursor: pointer;
            z-index: 2; 
        }

        .filter-label::before {
            content: attr(data-label-text);
            display: inline-block;
            padding: 0.4rem 1rem;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px; 
            font-size: 0.9em;
            font-weight: 500;
            white-space: nowrap;
            user-select: none;
            transition: all var(--transition-speed) ease;
            z-index: 1;
        }

        .filter-label:has(input:hover)::before {
            border-color: var(--primary-color);
            background-color: #3a3d42;
        }

        .filter-label:has(input:checked)::before {
            background-color: var(--primary-color-light);
            border-color: var(--primary-color-dark);
            color: var(--dark-text-color);
            font-weight: 600;
        }

        .filter-label:has(input:focus-visible)::before {
            box-shadow: 0 0 0 2px var(--bg-color), 0 0 0 4px var(--secondary-color);
        }
        .search-input-field {
            flex-grow: 1; 
            min-width: 200px;
        }
        .top-list-controls {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 0.5rem;
        }
        .multi-level-count {
            font-size: 0.9em;
            font-weight: bold;
            color: var(--secondary-color);
            margin-left: 0.5rem;
        }

        @media (max-width: 1100px) {
            .container {
                flex-direction: column;
            }
            .sidebar {
                position: static; 
                min-width: 100%; 
                order: 1; 
            }
            .main-content {
                order: 2; 
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            .tabs {
                margin-bottom: 1.5rem;
            }
            .card {
                padding: 1rem;
            }
            .tab-button {
                padding: 0.75rem 1rem;
                font-size: 1em;
            }
            .item-list {
                grid-template-columns: 1fr; 
            }
            
        }

        @media (max-width: 480px) {
            h1 { font-size: 1.8em; }
            h2 { font-size: 1.4em; }

            .production-grid {
                grid-template-columns: 1fr;
            }
            .production-grid .info-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            .production-grid input[type="text"] {
                max-width: 100%;
            }
            .level-control input {
                width: 80px;
            }
            .top-list li {
                font-size: 0.9em;
                flex-wrap: wrap; 
            }
            .top-list li::before {
                margin-right: 0.75rem;
            }
            .top-list-item-name{
                width:auto;
            }
        }
    </style>
</head>
<body>
    <script>
      (function(){
        var fullres = document.createElement('script');
        fullres.async = true;
        fullres.src = 'https://t.fullres.net/acfkgithub.js?'+(new Date()-new Date()%43200000);
        document.head.appendChild(fullres);
      })();
    </script>
    <div class="tabs">
        <button class="tab-button active" onclick="openTab('grimoire')">Grimoire</button>
        <button class="tab-button" onclick="openTab('tesseract')">Tesseract</button>
        <button class="tab-button" onclick="openTab('compass')">Compass</button>
        <button class="tab-button" onclick="openTab('import')">Import</button>
    </div>

    <div id="grimoire" class="tab-content active"></div>
    <div id="tesseract" class="tab-content"></div>
    <div id="compass" class="tab-content"></div>
    <div id="import" class="tab-content">
        <div class="card">
            <h2>Import Data</h2>
            <p>Paste your raw data from IdleonEfficiency to import levels.</p>
            <textarea id="import-textarea" placeholder="Paste your JSON data here..."></textarea>
            <button id="import-submit-btn">Import Levels & Unlocks</button>
        </div>
    </div>

    <script>
        const GRIMOIRE_ITEMS_DATA = [{"name":"Wraith_Damage_製_(Tap_for_more_info)","x1":8,"x2":1.1,"boneType":0,"x4":999999,"x5":1,"unlockLevel":0,"x7":0,"x8":0,"description":"+{_Base_Damage_in_Wraith_Form"},{"name":"Wraith_Accuracy","x1":8,"x2":1.04,"boneType":0,"x4":999999,"x5":1,"unlockLevel":1,"x7":0,"x8":0,"description":"+{_Base_Accuracy_in_Wraith_Form"},{"name":"Wraith_Defence","x1":9,"x2":1.1,"boneType":0,"x4":999999,"x5":1,"unlockLevel":5,"x7":0,"x8":0,"description":"+{_Base_Defence_in_Wraith_Form"},{"name":"Wraith_Health","x1":10,"x2":1.07,"boneType":0,"x4":999999,"x5":1,"unlockLevel":10,"x7":0,"x8":0,"description":"+{_Base_HP_in_Wraith_Form"},{"name":"Ribbon_Shelf","x1":1000,"x2":1.3,"boneType":0,"x4":1,"x5":1,"unlockLevel":25,"x7":0,"x8":0,"description":"Unlocks_Ribbons_for_Meals,_found_at_Le_Menu_in_W4"},{"name":"Ribbon_Winning_製","x1":50,"x2":1.6,"boneType":0,"x4":50,"x5":1,"unlockLevel":26,"x7":0,"x8":0,"description":"Get_+1_Daily_Ribbon,_+{%_chance_for_rare_quality"},{"name":"Wraith_Damage_II","x1":25,"x2":1.11,"boneType":0,"x4":999999,"x5":3,"unlockLevel":80,"x7":0,"x8":0,"description":"+{_Base_Damage_in_Wraith_Form"},{"name":"Wraith_of_all_Trades","x1":50,"x2":1.18,"boneType":0,"x4":999999,"x5":1,"unlockLevel":125,"x7":0,"x8":0,"description":"+{%_Accuracy,_Defence,_and_HP_in_Wraith_Form"},{"name":"Wraith_Destruction","x1":70,"x2":1.15,"boneType":0,"x4":999999,"x5":1,"unlockLevel":155,"x7":0,"x8":0,"description":"+{%_Total_Damage_in_Wraith_Form"},{"name":"Land_Rank_Database_Maxim","x1":100,"x2":10,"boneType":0,"x4":10,"x5":1,"unlockLevel":190,"x7":0,"x8":0,"description":"+{_Max_LV_for_5th_column_Land_Rank_upgrades"},{"name":"Wraith_Crits","x1":150,"x2":1.25,"boneType":0,"x4":40,"x5":1,"unlockLevel":220,"x7":0,"x8":0,"description":"+{%_Crit_Chance_in_Wraith_Form"},{"name":"Pure_Opals","x1":1500,"x2":1.8,"boneType":1,"x4":25,"x5":1,"unlockLevel":255,"x7":0,"x8":0,"description":"+{_Opals_to_give_to_your_Villagers_in_World_5"},{"name":"Wraith_Accuracy_II","x1":200,"x2":1.06,"boneType":0,"x4":999999,"x5":3,"unlockLevel":290,"x7":0,"x8":0,"description":"+{_Base_Accuracy_in_Wraith_Form"},{"name":"Knockout!_(#)_製","x1":450,"x2":1.45,"boneType":1,"x4":999999,"x5":1,"unlockLevel":330,"x7":0,"x8":0,"description":"+{%_Wraith_DMG_per_KO!_Target:$"},{"name":"Sacrifice_of_Harvest","x1":300,"x2":1.04,"boneType":0,"x4":999999,"x5":5,"unlockLevel":380,"x7":0,"x8":0,"description":"}x_higher_Crop_Evo_chance"},{"name":"Wraith_Defence_II","x1":500,"x2":1.12,"boneType":1,"x4":999999,"x5":1,"unlockLevel":425,"x7":0,"x8":0,"description":"+{_Base_Defence_in_Wraith_Form"},{"name":"Wraith_Damage_III","x1":750,"x2":1.12,"boneType":1,"x4":999999,"x5":15,"unlockLevel":470,"x7":0,"x8":0,"description":"+{_Base_Damage_in_Wraith_Form"},{"name":"Grey_Tome_Book","x1":2000,"x2":1.25,"boneType":1,"x4":150,"x5":1,"unlockLevel":500,"x7":0,"x8":0,"description":"}x_higher_bonuses_from_the_Tome"},{"name":"Femur_Hoarding","x1":3500,"x2":1.15,"boneType":1,"x4":999999,"x5":2,"unlockLevel":550,"x7":0,"x8":0,"description":"+{%_Wraith_DMG_per_POW_10_Femurs_owned"},{"name":"Wraith_Health_II","x1":4000,"x2":1.07,"boneType":1,"x4":999999,"x5":2,"unlockLevel":650,"x7":0,"x8":0,"description":"+{_Base_HP_in_Wraith_Form"},{"name":"Wraith_Strikeforce","x1":5800,"x2":1.15,"boneType":1,"x4":999999,"x5":2,"unlockLevel":770,"x7":0,"x8":0,"description":"+{%_Crit_DMG_in_Wraith_Form"},{"name":"Elimination!_(#)_製","x1":6250,"x2":1.45,"boneType":1,"x4":999999,"x5":1,"unlockLevel":900,"x7":0,"x8":0,"description":"+{%_Wraith_DMG_per_elim!_Target:$"},{"name":"Superior_Crop_Research","x1":7500,"x2":1.25,"boneType":0,"x4":200,"x5":1,"unlockLevel":1050,"x7":0,"x8":0,"description":"}x_higher_bonuses_from_the_Crop_Scientist"},{"name":"Bones_o'_Plenty","x1":8000,"x2":1.2,"boneType":1,"x4":999999,"x5":2,"unlockLevel":1250,"x7":0,"x8":0,"description":"+{%_Extra_Bones"},{"name":"Skull_of_Major_Experience_製","x1":8500,"x2":1.03,"boneType":1,"x4":999999,"x5":8,"unlockLevel":1475,"x7":0,"x8":0,"description":"+{%_Class_EXP_bonus_for_all_characters,_always!"},{"name":"Wraith_Accuracy_III","x1":10500,"x2":1.07,"boneType":2,"x4":999999,"x5":5,"unlockLevel":1700,"x7":0,"x8":0,"description":"+{_Base_Accuracy_in_Wraith_Form"},{"name":"Supreme_Head_Chef_Status","x1":11000,"x2":1.4,"boneType":1,"x4":20,"x5":1,"unlockLevel":1900,"x7":0,"x8":0,"description":"+{_Max_LV_for_all_Meals._Go_max_them!"},{"name":"Ribcage_Hoarding","x1":12000,"x2":1.2,"boneType":0,"x4":999999,"x5":1,"unlockLevel":2150,"x7":0,"x8":0,"description":"+{%_Wraith_DEF_per_POW_10_Ribcages_owned"},{"name":"Wraith_Destruction_II","x1":13900,"x2":1.17,"boneType":1,"x4":999999,"x5":3,"unlockLevel":2300,"x7":0,"x8":0,"description":"+{%_Total_Damage_in_Wraith_Form"},{"name":"Villager_Extraciricular","x1":15000,"x2":1.15,"boneType":2,"x4":999999,"x5":1,"unlockLevel":2500,"x7":0,"x8":0,"description":"}x_Villager_EXP_gain_in_World_5"},{"name":"Wraith_Defence_III","x1":14500,"x2":1.11,"boneType":2,"x4":999999,"x5":2,"unlockLevel":2800,"x7":0,"x8":0,"description":"+{_Base_Defence_in_Wraith_Form"},{"name":"Annihilation!_(#)_製","x1":16500,"x2":1.55,"boneType":2,"x4":999999,"x5":1,"unlockLevel":2900,"x7":0,"x8":0,"description":"+{%_Wraith_DMG_per_stack!_Target:$"},{"name":"Talents_for_Me,_not_for_Thee","x1":18000,"x2":1.1,"boneType":2,"x4":200,"x5":1,"unlockLevel":3150,"x7":0,"x8":0,"description":"+{_Talent_PTS_for_the_Death_Bringer_class_only"},{"name":"Wraith_Damage_IV","x1":19750,"x2":1.13,"boneType":2,"x4":999999,"x5":50,"unlockLevel":3300,"x7":0,"x8":0,"description":"+{_Base_Damage_in_Wraith_Form"},{"name":"Wraith_Health_III","x1":21500,"x2":1.07,"boneType":2,"x4":999999,"x5":3,"unlockLevel":3500,"x7":0,"x8":0,"description":"+{_Base_HP_in_Wraith_Form"},{"name":"Skull_of_Major_Damage_製","x1":23000,"x2":1.04,"boneType":2,"x4":999999,"x5":3,"unlockLevel":3750,"x7":0,"x8":0,"description":"+{%_Total_DMG_bonus_for_all_characters,_always!"},{"name":"Writhing_Grimoire","x1":27000,"x2":1.2,"boneType":1,"x4":50,"x5":1,"unlockLevel":4100,"x7":0,"x8":0,"description":"}x_higher_bonuses_from_most_Grimoire_upgrades"},{"name":"Wraith_Accuracy_IV","x1":34000,"x2":1.08,"boneType":2,"x4":999999,"x5":5,"unlockLevel":4200,"x7":0,"x8":0,"description":"+{_Base_Accuracy_in_Wraith_Form"},{"name":"Wraith_of_all_Trades_II","x1":42000,"x2":1.06,"boneType":3,"x4":999999,"x5":1,"unlockLevel":4500,"x7":0,"x8":0,"description":"+{%_Accuracy,_Defence,_and_HP_in_Wraith_Form"},{"name":"Skull_of_Major_Talent_製","x1":50000,"x2":1.65,"boneType":3,"x4":30,"x5":1,"unlockLevel":4600,"x7":0,"x8":0,"description":"+{_Talent_LVs_for_all_characters,_always!"},{"name":"Wraith_Defence_IV","x1":57000,"x2":1.13,"boneType":3,"x4":999999,"x5":3,"unlockLevel":4800,"x7":0,"x8":0,"description":"+{_Base_Defence_in_Wraith_Form"},{"name":"Cranium_Hoarding","x1":63000,"x2":1.07,"boneType":3,"x4":999999,"x5":1,"unlockLevel":5000,"x7":0,"x8":0,"description":"+{%_Wraith_Accuracy_per_POW_10_Craniums_owned"},{"name":"Wraith_Health_IV","x1":75000,"x2":1.09,"boneType":3,"x4":999999,"x5":5,"unlockLevel":5200,"x7":0,"x8":0,"description":"+{_Base_HP_in_Wraith_Form"},{"name":"Wraith_Destruction_III","x1":85000,"x2":1.17,"boneType":3,"x4":999999,"x5":5,"unlockLevel":5400,"x7":0,"x8":0,"description":"+{%_Total_Damage_in_Wraith_form"},{"name":"Skull_of_Major_Droprate_製","x1":100000,"x2":1.08,"boneType":3,"x4":999999,"x5":1,"unlockLevel":5600,"x7":0,"x8":0,"description":"+{%_Drop_Rate_bonus_for_all_characters,_always!"},{"name":"Ok_fine,_Talents_for_Thee_too","x1":120000,"x2":1.15,"boneType":3,"x4":999999,"x5":1,"unlockLevel":5850,"x7":0,"x8":0,"description":"+{_Talent_PTS_for_all_other_Master_Classes"},{"name":"Wraith_Damage_V","x1":150000,"x2":1.15,"boneType":2,"x4":999999,"x5":80,"unlockLevel":6200,"x7":0,"x8":0,"description":"+{_Base_Damage_in_Wraith_Form"},{"name":"Wraith_Accuracy_V","x1":200000,"x2":1.1,"boneType":2,"x4":999999,"x5":8,"unlockLevel":6500,"x7":0,"x8":0,"description":"+{_Base_Accuracy_in_Wraith_Form"},{"name":"Bovinae_Hoarding","x1":300000,"x2":1.35,"boneType":2,"x4":999999,"x5":1,"unlockLevel":6800,"x7":0,"x8":0,"description":"+{%_Extra_Bones_per_POW_10_Bovinae_owned"},{"name":"Wraith_Defence_V","x1":500000,"x2":1.15,"boneType":3,"x4":999999,"x5":5,"unlockLevel":7100,"x7":0,"x8":0,"description":"+{_Base_Defence_in_Wraith_Form"},{"name":"Wraith_Destruction_IV","x1":600000,"x2":1.18,"boneType":3,"x4":999999,"x5":8,"unlockLevel":7200,"x7":0,"x8":0,"description":"+{%_Total_Damage_in_Wraith_Form"},{"name":"Death_of_the_Atom_Price","x1":750000,"x2":1.15,"boneType":3,"x4":999999,"x5":1,"unlockLevel":7500,"x7":0,"x8":0,"description":"All_Atoms_are_+{%_cheaper_to_upgrade"},{"name":"Ripped_Page","x1":1999999999,"x2":99999,"boneType":1,"x4":1,"x5":1,"unlockLevel":7600,"x7":0,"x8":0,"description":"These_pages_are_missing..."},{"name":"Ripped_Page","x1":1999999999,"x2":99999,"boneType":1,"x4":1,"x5":1,"unlockLevel":7700,"x7":0,"x8":0,"description":"These_pages_are_missing..."},{"name":"Ripped_Page","x1":1999999999,"x2":99999,"boneType":1,"x4":1,"x5":1,"unlockLevel":7800,"x7":0,"x8":0,"description":"These_pages_are_missing..."}];
        const TESSERACT_ITEMS_RAW_DATA = [{"name":"Arcanist_Damage_製_(Tap_for_more_info)","x1":8,"x2":1.08,"x3":0,"x4":999999,"x5":1,"x6":0},{"name":"Arcanist_Accuracy","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":1},{"name":"Arcanist_Defence","x1":9,"x2":1.12,"x3":0,"x4":999999,"x5":1,"x6":5},{"name":"The_Prisma_Bubble_is_Real_製","x1":10,"x2":1.07,"x3":0,"x4":1,"x5":1,"x6":10},{"name":"Arcanist_Cataclysm","x1":1000,"x2":1.15,"x3":0,"x4":999999,"x5":1,"x6":25},{"name":"Wand_Drops_製","x1":50,"x2":1.2,"x3":0,"x4":999999,"x5":5,"x6":40},{"name":"Arcanist_Damage_II","x1":25,"x2":1.11,"x3":0,"x4":999999,"x5":3,"x6":70},{"name":"Tenteyecle_Nostalgia","x1":50,"x2":1.27,"x3":0,"x4":50,"x5":2,"x6":75},{"name":"Arcanist_Crits","x1":70,"x2":1.4,"x3":0,"x4":70,"x5":1,"x6":105},{"name":"Arcanist_Accuracy_II","x1":100,"x2":1.12,"x3":0,"x4":999999,"x5":2,"x6":120},{"name":"World_Ender","x1":1000,"x2":1.25,"x3":0,"x4":1,"x5":1,"x6":130},{"name":"Arcanist_Defence_II","x1":150,"x2":1.15,"x3":1,"x4":999999,"x5":2,"x6":160},{"name":"Singulon_Hoarding","x1":200,"x2":1.16,"x3":1,"x4":999999,"x5":2,"x6":190},{"name":"Arcane_Charging","x1":350,"x2":1.35,"x3":1,"x4":100,"x5":1,"x6":220},{"name":"Arcanist_Supercharge","x1":500,"x2":1.25,"x3":1,"x4":999999,"x5":1,"x6":250},{"name":"Arcanist_Damage_III","x1":800,"x2":1.11,"x3":2,"x4":999999,"x5":4,"x6":290},{"name":"Spheres_of_Gold","x1":1200,"x2":5,"x3":1,"x4":999999,"x5":2,"x6":330},{"name":"Ripple_in_Spacetime","x1":1550,"x2":1.23,"x3":1,"x4":999999,"x5":2,"x6":375},{"name":"Parallel_Statues_製","x1":2000,"x2":1.55,"x3":2,"x4":40,"x5":1,"x6":415},{"name":"Arcanist_Accuracy_III","x1":3500,"x2":1.13,"x3":2,"x4":999999,"x5":5,"x6":460},{"name":"Arcane_Basics","x1":10000,"x2":1.07,"x3":2,"x4":1,"x5":2,"x6":510},{"name":"Fastcasting","x1":5800,"x2":1.15,"x3":2,"x4":999999,"x5":1,"x6":560},{"name":"Arcanist_of_All_Trades","x1":6250,"x2":1.18,"x3":1,"x4":999999,"x5":3,"x6":610},{"name":"Ring_Drops_製","x1":7500,"x2":1.2,"x3":3,"x4":999999,"x5":5,"x6":670},{"name":"Arcanist_Cataclysm_II","x1":8000,"x2":1.21,"x3":1,"x4":999999,"x5":3,"x6":735},{"name":"Ethereal_Opals","x1":8500,"x2":1.8,"x3":2,"x4":25,"x5":1,"x6":800},{"name":"Inviting_a_Plus_One","x1":5000,"x2":1.15,"x3":3,"x4":300,"x5":1,"x6":890},{"name":"Doubulon_Hoarding","x1":11000,"x2":1.28,"x3":0,"x4":999999,"x5":2,"x6":990},{"name":"Jewel_of_Deadly_Wrath","x1":50000,"x2":1.2,"x3":3,"x4":1,"x5":1,"x6":1050},{"name":"Arcanist_Defence_III","x1":13900,"x2":1.16,"x3":2,"x4":999999,"x5":3,"x6":1150},{"name":"Parallel_Golden_Food_製","x1":7000,"x2":1.55,"x3":3,"x4":40,"x5":1,"x6":1250},{"name":"Arcanist_Cataclysm_III","x1":14500,"x2":1.15,"x3":2,"x4":999999,"x5":4,"x6":1350},{"name":"Villager_Indoctrination","x1":16500,"x2":1.16,"x3":3,"x4":999999,"x5":1,"x6":1500},{"name":"My_Talents,_and_Mine_Alone","x1":9000,"x2":1.11,"x3":3,"x4":200,"x5":1,"x6":1650},{"name":"Verdon_Hoarding","x1":19750,"x2":1.26,"x3":1,"x4":999999,"x5":1,"x6":1800},{"name":"Jewel_of_the_North_Winds","x1":200000,"x2":1.07,"x3":3,"x4":1,"x5":3,"x6":2000},{"name":"Arcanist_Damage_IV","x1":14000,"x2":1.04,"x3":3,"x4":999999,"x5":6,"x6":2050},{"name":"Eternal_Stream","x1":20000,"x2":1.35,"x3":4,"x4":999999,"x5":1,"x6":2350},{"name":"Arcanist_Accuracy_IV","x1":30000,"x2":1.08,"x3":3,"x4":999999,"x5":8,"x6":2600},{"name":"Fractal_Tesseract","x1":40000,"x2":2.35,"x3":4,"x4":50,"x5":1,"x6":2750},{"name":"Astrology_Cultism","x1":50000,"x2":150,"x3":4,"x4":10,"x5":1,"x6":2850},{"name":"Bludon_Hoarding","x1":57000,"x2":1.25,"x3":2,"x4":999999,"x5":3,"x6":3000},{"name":"Arcanist_Cataclysm_IV","x1":63000,"x2":1.17,"x3":3,"x4":999999,"x5":6,"x6":3350},{"name":"Jewel_of_Eternal_Energy","x1":1500000,"x2":1.09,"x3":4,"x4":1,"x5":5,"x6":3700},{"name":"Arcanist_of_All_Trades_II","x1":85000,"x2":1.22,"x3":3,"x4":999999,"x5":6,"x6":3850},{"name":"Pinnacle_of_Prisma","x1":10000,"x2":40,"x3":5,"x4":20,"x5":1,"x6":4000},{"name":"Arcanist_Defence_IV","x1":120000,"x2":1.15,"x3":4,"x4":999999,"x5":8,"x6":4300},{"name":"Gambit_Grandmaster","x1":150000,"x2":1.25,"x3":4,"x4":200,"x5":1,"x6":4600},{"name":"Vicar_of_the_Emperor","x1":50000,"x2":4.5,"x3":5,"x4":50,"x5":1,"x6":4900},{"name":"Massivon_Hoarding_製","x1":300000,"x2":1.35,"x3":3,"x4":999999,"x5":1,"x6":5100},{"name":"Arcanist_Damage_V","x1":500000,"x2":1.14,"x3":4,"x4":999999,"x5":10,"x6":5400},{"name":"Drop_Rate_Crossfire_製","x1":600000,"x2":1.5,"x3":4,"x4":100,"x5":1,"x6":5700},{"name":"Arcanist_Accuracy_V","x1":750000,"x2":1.15,"x3":4,"x4":999999,"x5":12,"x6":5900},{"name":"Arcanist_Cataclysm_V","x1":950000,"x2":1.17,"x3":5,"x4":999999,"x5":10,"x6":6200},{"name":"Endless_Reductions_製","x1":1200000,"x2":1.8,"x3":5,"x4":999999,"x5":1,"x6":6500},{"name":"Arcanist_of_All_Trades_III","x1":1500000,"x2":1.35,"x3":5,"x4":999999,"x5":8,"x6":6750},{"name":"Aurion_Hoarding","x1":2000000,"x2":1.8,"x3":4,"x4":999999,"x5":2,"x6":7000},{"name":"Universe_Talent","x1":3000000,"x2":500,"x3":5,"x4":5,"x5":1,"x6":7300},{"name":"Beyond_All_Limits_製","x1":5000000,"x2":200,"x3":5,"x4":10,"x5":1,"x6":7600},{"name":"Boundless_Energy","x1":1999999999,"x2":99999,"x3":1,"x4":1,"x5":1,"x6":7800},{"name":"Boundless_Energy","x1":1999999999,"x2":99999,"x3":1,"x4":1,"x5":1,"x6":8200},{"name":"Boundless_Energy","x1":1999999999,"x2":99999,"x3":1,"x4":1,"x5":1,"x6":8500},{"name":"Boundless_Energy","x1":1999999999,"x2":99999,"x3":1,"x4":1,"x5":1,"x6":8800}];
        const COMPASS_ITEMS_RAW_DATA = [{"name":"Pathfinder","x1":2,"x2":1.1,"x3":0,"x4":1,"x5":1,"x6":0,"x7":693,"x8":540,"x9":0,"x10":0,"description":"You_can_open_portals_using_dust_dropped_by_mobs,_simply_hold_down_on_a_portal_for_2_seconds!"},{"name":"Elemental_Path","x1":30,"x2":3.1,"x3":0,"x4":24,"x5":1,"x6":0,"x7":581,"x8":470,"x9":0,"x10":0,"description":"Unlocks_a_new_Elemental_upgrade,_right_here_in_The_Compass!"},{"name":"Elemental_Vision","x1":8,"x2":1.1,"x3":0,"x4":1,"x5":1,"x6":0,"x7":525,"x8":377,"x9":0,"x10":0,"description":"You_can_now_see_the_elemental_weakness_of_abominations,_as_well_as_mobs_in_AFK_Info._Your_current_element_is_$"},{"name":"Weapon_Drop","x1":14,"x2":1.1,"x3":0,"x4":1,"x5":1,"x6":0,"x7":443,"x8":444,"x9":0,"x10":0,"description":"Certain_mobs_can_now_drop_Tempest_Weapons_at_a_1_in_$_chance._Check_AFK_Info_to_see_what_Tempest_Items_can_be_found!"},{"name":"Stone_Drop","x1":20,"x2":1.1,"x3":0,"x4":1,"x5":1,"x6":0,"x7":406,"x8":347,"x9":0,"x10":0,"description":"All_mobs_can_now_drop_Tempest_Upgrade_Stones,_at_a_1_in_$_chance"},{"name":"Medallion_Collection","x1":50,"x2":1.1,"x3":0,"x4":1,"x5":1,"x6":0,"x7":297,"x8":385,"x9":0,"x10":0,"description":"All_mobs_can_now_drop_their_very_own_commemorative_Medallion!_They_have_a_1_in_$_chance_of_dropping,_and_only_while_in_Tempest_Form!"},{"name":"Medallion_Magnate","x1":8,"x2":28,"x3":1,"x4":999999,"x5":2,"x6":0,"x7":205,"x8":438,"x9":0,"x10":0,"description":"Medallions_now_show_up_visually_next_to_the_monster's_name_in_its_Card_Info._@_Also,_+{%_Tempest_Damage_AND_Accuracy_per_Medallion_collected."},{"name":"The_Luck_Factor","x1":8,"x2":9.6,"x3":1,"x4":25,"x5":1,"x6":0,"x7":127,"x8":349,"x9":0,"x10":0,"description":"Boosts_the_drop_chance_of_ALL_Tempest_items,_including_medallions,_by_{%_of_your_normal_Drop_Rarity._@_Total_Bonus:_+$%_Tempest_Drop_Rate"},{"name":"Elemental_Destruction","x1":8,"x2":1.6,"x3":0,"x4":50,"x5":2,"x6":0,"x7":268,"x8":265,"x9":0,"x10":0,"description":"All_elemental_damage_is_+{%_higher._In_other_words,_this_is_a_damage_multi,_but_it_only_works_when_using_the_right_element!"},{"name":"Top_of_the_Mornin'","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":10,"x6":0,"x7":163,"x8":205,"x9":0,"x10":0,"description":"The_first_{_kills_at_the_start_of_each_day_have_a_200x_chance_to_drop_Tempest_items!"},{"name":"Weapon_Improvement","x1":8,"x2":1.08,"x3":1,"x4":999999,"x5":2,"x6":0,"x7":377,"x8":205,"x9":0,"x10":0,"description":"Tempest_Weapons_dropped_by_mobs_now_have_higher_weapon_power_the_more_HP_the_mob_has!_@_Also,_+{%_Tempest_DMG!"},{"name":"Stone_Failsafe","x1":8,"x2":1.9,"x3":2,"x4":25,"x5":2,"x6":0,"x7":495,"x8":275,"x9":0,"x10":1,"description":"All_Tempest_stones_now_have_a_{%_chance_to_not_use_up_a_slot_when_they_fail!"},{"name":"Ring_Drop","x1":40,"x2":1.1,"x3":1,"x4":1,"x5":1,"x6":0,"x7":481,"x8":147,"x9":0,"x10":0,"description":"Certain_mobs_can_now_drop_Tempest_Rings_at_a_1_in_$_chance._Check_AFK_Info_to_see_what_Tempest_Items_can_be_found!"},{"name":"Fighter_Path","x1":2,"x2":2.9,"x3":0,"x4":31,"x5":1,"x6":0,"x7":761,"x8":443,"x9":0,"x10":1,"description":"Unlocks_a_new_Fighter_upgrade,_right_here_in_The_Compass!"},{"name":"Tempest_Damage","x1":4,"x2":1.12,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":843,"x8":379,"x9":0,"x10":1,"description":"Boosts_your_Base_Damage_in_Tempest_Form_by_+{"},{"name":"Tempest_Mega_Damage","x1":8,"x2":1.15,"x3":1,"x4":999999,"x5":4,"x6":0,"x7":753,"x8":239,"x9":0,"x10":1,"description":"Boosts_your_Base_Damage_in_Tempest_Form_by_+{"},{"name":"Tempest_Crits","x1":8,"x2":1.7,"x3":0,"x4":25,"x5":3,"x6":0,"x7":845,"x8":265,"x9":0,"x10":1,"description":"+{%_Critical_Hit_chance_in_Tempest_Form"},{"name":"Tempest_Accuracy","x1":5,"x2":1.07,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":941,"x8":324,"x9":0,"x10":1,"description":"+{_Base_Accuracy_in_Tempest_Form"},{"name":"Multishot","x1":8,"x2":1.25,"x3":0,"x4":999999,"x5":5,"x6":0,"x7":1046,"x8":369,"x9":0,"x10":1,"description":"+{%_chance_to_shoot_multiple_arrows_while_in_Tempest_Form"},{"name":"Tempest_Bullseye","x1":8,"x2":1.085,"x3":1,"x4":999999,"x5":4,"x6":0,"x7":1189,"x8":351,"x9":0,"x10":1,"description":"+{_Base_Accuracy_in_Tempest_Form"},{"name":"Tempest_Maxhit","x1":8,"x2":1.35,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1108,"x8":262,"x9":0,"x10":1,"description":"+{%_Crit_DMG_in_Tempest_Form"},{"name":"Tempest_Rapidshot","x1":8,"x2":1.75,"x3":1,"x4":999999,"x5":2,"x6":0,"x7":986,"x8":205,"x9":0,"x10":1,"description":"+{%_Basic_Attack_speed_in_Tempest_Form"},{"name":"Stardust_Hoarding","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":888,"x8":135,"x9":0,"x10":1,"description":"+{%_Tempest_Accuracy_per_POW_10_Stardust_owned_@_Total_Bonus:_$%"},{"name":"Cooldust_Hoarding","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":1038,"x8":56,"x9":0,"x10":1,"description":"+{%_Tempest_DMG_per_POW_10_Cooldust_owned"},{"name":"Tempest_Ultra_Damage","x1":8,"x2":1.15,"x3":3,"x4":999999,"x5":10,"x6":0,"x7":1123,"x8":135,"x9":0,"x10":1,"description":"Boosts_your_damage_in_Tempest_Mode_by_+{"},{"name":"Tempest_One_Huuuundred_and_Eighty","x1":8,"x2":1.13,"x3":3,"x4":999999,"x5":10,"x6":0,"x7":1281,"x8":182,"x9":0,"x10":1,"description":"+{_Base_Accuracy_in_Tempest_Form"},{"name":"Mastery_Destruction","x1":8,"x2":1.35,"x3":4,"x4":999999,"x5":2,"x6":0,"x7":1239,"x8":70,"x9":0,"x10":1,"description":"}x_Tempest_DMG_per_Mastery_completed_in_Sneaking_@_Total_Bonus:_$"},{"name":"Survival_Path","x1":4,"x2":3,"x3":0,"x4":26,"x5":1,"x6":0,"x7":610,"x8":603,"x9":0,"x10":2,"description":"Unlocks_a_new_Survival_upgrade,_right_here_in_The_Compass!"},{"name":"Tempest_Heartbeat","x1":8,"x2":1.08,"x3":0,"x4":999999,"x5":3,"x6":0,"x7":508,"x8":636,"x9":0,"x10":2,"description":"+{_Base_HP_in_Tempest_Form"},{"name":"Tempest_Defence","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":3,"x6":0,"x7":528,"x8":723,"x9":0,"x10":2,"description":"+{_Base_Defence_in_Tempest_Form"},{"name":"Moondust_Hoarding","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":304,"x8":669,"x9":0,"x10":2,"description":"+{%_Tempest_Defence_per_POW_10_Moondust_owned_@_Total_Bonus:_$%"},{"name":"Mountains_of_Dust","x1":8,"x2":1.25,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":510,"x8":937,"x9":0,"x10":2,"description":"+{%_Extra_Dust"},{"name":"Tempest_Reach","x1":8,"x2":1.3,"x3":1,"x4":100,"x5":3,"x6":0,"x7":106,"x8":665,"x9":0,"x10":2,"description":"+{_Pixels_of_Reach_in_Tempest_Mode"},{"name":"Novadust_Discovery","x1":8,"x2":1.2,"x3":2,"x4":999999,"x5":10,"x6":0,"x7":254,"x8":779,"x9":0,"x10":2,"description":"You_can_now_find_Novadust_from_any_monster,_at_a_1_in_10,000_chance._This_upgrade_boosts_this_chance_by_+{%"},{"name":"Solardust_Hoarding","x1":8,"x2":1.42,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":382,"x8":852,"x9":0,"x10":2,"description":"+{%_Extra_Dust_per_POW_10_Solardust_owned_@_Total_Bonus:_$%"},{"name":"5_Minute_Mile","x1":8,"x2":1.15,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":562,"x8":822,"x9":0,"x10":2,"description":"+{%_Movement_Speed_in_Tempest_Mode._@_Have_you_ever_run_a_5_minute_mile?_I_haven't,_but_I'll_edit_this_if_I_ever_do!"},{"name":"Knockoff_Compass","x1":8,"x2":1.75,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":44,"x8":795,"x9":0,"x10":2,"description":"All_compass_upgrades_are_+$%_Cheaper!"},{"name":"Can't_Touch_This","x1":8,"x2":1.6,"x3":2,"x4":30,"x5":0.1,"x6":0,"x7":152,"x8":883,"x9":0,"x10":2,"description":"Increases_invulnerability_time_in_Tempest_Form_by_+{_sec"},{"name":"Spire_of_Dust","x1":8,"x2":1.4,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":304,"x8":935,"x9":0,"x10":2,"description":"}x_Extra_Dust._@_Yea,_this_bonus_is_a_whole_new_Multiplier,_kinda_baller..."},{"name":"Circle_Supremacy","x1":8,"x2":1.9,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":84,"x8":1005,"x9":0,"x10":2,"description":"All_Circle_shaped_Compass_bonuses_give_}x_higher_bonuses!"},{"name":"Nomadic_Path","x1":8,"x2":2.8,"x3":0,"x4":38,"x5":1,"x6":0,"x7":757,"x8":641,"x9":0,"x10":3,"description":"Unlocks_a_new_Nomadic_upgrade,_right_here_in_The_Compass!"},{"name":"Jade_Coinage","x1":8,"x2":1.07,"x3":0,"x4":999999,"x5":3,"x6":0,"x7":905,"x8":688,"x9":0,"x10":3,"description":"}x_Jade_Coin_gain_in_Sneaking"},{"name":"Critter_Culture","x1":8,"x2":1.4,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":825,"x8":746,"x9":0,"x10":3,"description":"+{_base_Critter_per_Trap,_and_+{%_higher_Trap-O-Vision_collection_rate!"},{"name":"Moon_of_Print","x1":8,"x2":1.1,"x3":0,"x4":200,"x5":0.02,"x6":0,"x7":1021,"x8":634,"x9":0,"x10":3,"description":"3d_Printer_Samples_grow_by_+{%_every_day_for_100_days"},{"name":"Exalted_Stamps","x1":95,"x2":20,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":917,"x8":810,"x9":0,"x10":3,"description":"+{_Exalted_Stamp_uses._Apply_them_to_a_stamp_to_PERMANENTLY_double_its_bonus!_Other_sources_can_push_Exalted_Stamps_beyond_2x!"},{"name":"Moon_of_Sneak","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":785,"x8":858,"x9":0,"x10":3,"description":"}x_higher_Stealth_for_all_ninja_twins._You_know_what,_I'll_DOUBLE_this_bonus_every_50_levels,_trust_me_bro!"},{"name":"Talented_Masters","x1":8,"x2":1.22,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1181,"x8":676,"x9":0,"x10":3,"description":"+{_Talent_PTS_for_all_other_Master_Classes"},{"name":"Magnesium_Atom","x1":80,"x2":1.1,"x3":1,"x4":1,"x5":1,"x6":0,"x7":1085,"x8":756,"x9":0,"x10":3,"description":"Unlocks_a_new_atom_in_the_Atom_Collider_in_World_3"},{"name":"Moon_of_Damage","x1":8,"x2":1.06,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":1063,"x8":882,"x9":0,"x10":3,"description":"+{%_higher_damage_for_all_characters._Not_tempest_damage,_just_good_ol'_classic_IdleOn_damage."},{"name":"All_Knowing_Eye","x1":8,"x2":1.05,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":903,"x8":966,"x9":0,"x10":3,"description":"}x_higher_Sneaking_EXP_Gain_for_all_ninja_twins"},{"name":"Atomic_Cost_Crash","x1":8,"x2":1.18,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1309,"x8":632,"x9":0,"x10":3,"description":"All_Atoms_are_+{%_cheaper_to_upgrade"},{"name":"Moon_of_Experience","x1":8,"x2":1.04,"x3":3,"x4":999999,"x5":15,"x6":0,"x7":1261,"x8":790,"x9":0,"x10":3,"description":"+{%_Class_EXP_for_all_characters"},{"name":"Opa_Opa_Opa!","x1":8,"x2":2.1,"x3":2,"x4":25,"x5":1,"x6":0,"x7":1187,"x8":930,"x9":0,"x10":3,"description":"+{_Opals_to_give_to_Villagers"},{"name":"Atomic_Potential","x1":8,"x2":1.95,"x3":2,"x4":20,"x5":1,"x6":0,"x7":1051,"x8":1028,"x9":0,"x10":3,"description":"+{_Max_LV_for_all_atoms_in_the_Atom_Collider"},{"name":"Pristine_Collector","x1":8,"x2":1.65,"x3":3,"x4":999999,"x5":2,"x6":0,"x7":1425,"x8":726,"x9":0,"x10":3,"description":"+{%_higher_chance_to_find_Pristine_Charms_in_Sneaking"},{"name":"Monument_Homage","x1":8,"x2":1.3,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":1367,"x8":862,"x9":0,"x10":3,"description":"+{%_Monument_AFK_rate_for_all_monuments_in_the_Hole"},{"name":"My_Talent_is_Best_Talent","x1":8,"x2":1.16,"x3":2,"x4":200,"x5":1,"x6":0,"x7":1319,"x8":968,"x9":0,"x10":3,"description":"+{_Talent_PTS_for_the_Wind_Walker_class_only"},{"name":"Moon_of_Sleep","x1":8,"x2":1.4,"x3":4,"x4":999999,"x5":0.2,"x6":0,"x7":1209,"x8":1078,"x9":0,"x10":3,"description":"+{%_AFK_Gains_for_all_characters"},{"name":"Aluminium_Atom","x1":2800,"x2":1.1,"x3":3,"x4":1,"x5":1,"x6":0,"x7":1493,"x8":890,"x9":0,"x10":3,"description":"Unlocks_a_new_atom_in_the_Atom_Collider_in_World_3"},{"name":"Villagerz_Learnz","x1":8,"x2":1.32,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":1437,"x8":1000,"x9":0,"x10":3,"description":"}x_Villager_EXP_Gain,_not_that_you_need_it_though..."},{"name":"Abomination_Slayer_I","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":846,"x8":537,"x9":0,"x10":4,"description":"You_have_slain_the_green_mushroom_abomination!_@_+{_Base_Tempest_Damage"},{"name":"Abomination_Slayer_II","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":945,"x8":508,"x9":0,"x10":4,"description":"You_have_slain_the_bored_bean_abomination!_@_+{_Base_Tempest_Accuracy"},{"name":"Abomination_Slayer_III","x1":8,"x2":1.21,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1022,"x8":472,"x9":0,"x10":4,"description":"You_have_slain_the_carrot_abomination!_@_+{%_Tempest_Move_Speed"},{"name":"Abomination_Slayer_IV","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1093,"x8":523,"x9":0,"x10":4,"description":"You_have_slain_the_gigafrog_abomination!_@_+{_Base_Tempest_Defence"},{"name":"Abomination_Slayer_V","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1156,"x8":453,"x9":0,"x10":4,"description":"You_have_slain_the_acorn_abomination!_@_+{%_Tempest_Damage"},{"name":"Abomination_Slayer_VI","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1235,"x8":476,"x9":0,"x10":4,"description":"You_have_slain_the_rat_abomination!_@_+{_Pixels_of_Reach_in_Tempest_Mode"},{"name":"Abomination_Slayer_VII","x1":8,"x2":3.5,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1314,"x8":510,"x9":0,"x10":4,"description":"You_have_slain_the_sandypot_abomination!_@_+{%_Tempest_Crit_Chance"},{"name":"Abomination_Slayer_VIII","x1":8,"x2":2.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1355,"x8":441,"x9":0,"x10":4,"description":"You_have_slain_the_crabcake_abomination!_@_+{_Windwalker_Talent_PTS"},{"name":"Abomination_Slayer_IX","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1372,"x8":362,"x9":0,"x10":4,"description":"You_have_slain_the_sandcastle_abomination!_@_+{%_Extra_Dust"},{"name":"Abomination_Slayer_X","x1":8,"x2":1.5,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1446,"x8":327,"x9":0,"x10":4,"description":"You_have_slain_the_mashed_potato_abomination!_@_+{%_Tempest_Attack_Speed"},{"name":"Abomination_Slayer_XI","x1":8,"x2":5.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1516,"x8":347,"x9":0,"x10":4,"description":"You_have_slain_the_moonmoon_abomination!_@_+{%_Tempest_Minimum_DMG"},{"name":"Abomination_Slayer_XII","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1533,"x8":419,"x9":0,"x10":4,"description":"You_have_slain_the_fishcrate_abomination!_@_+{_extra_kills_for_Top_of_the_Mornin'"},{"name":"Abomination_Slayer_XIII","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1551,"x8":494,"x9":0,"x10":4,"description":"You_have_slain_the_snelbie_abomination!_@_+{%_Medallion_Drop_Chance"},{"name":"Abomination_Slayer_XIV","x1":8,"x2":1.3,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1578,"x8":565,"x9":0,"x10":4,"description":"You_have_slain_the_flake_abomination!_@_+{%_Multishot_Chance_in_Tempest_Mode"},{"name":"Abomination_Slayer_XV","x1":8,"x2":1.2,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1653,"x8":582,"x9":0,"x10":4,"description":"You_have_slain_the_bloque_abomination!_@_+{%_Elemental_Damage"},{"name":"Abomination_Slayer_XVI","x1":8,"x2":1.25,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1726,"x8":546,"x9":0,"x10":4,"description":"You_have_slain_the_snowman_abomination!_@_+{%_Tempest_Critical_Damage"},{"name":"Abomination_Slayer_XVII","x1":8,"x2":37,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1749,"x8":474,"x9":0,"x10":4,"description":"You_have_slain_the_quenchie_abomination!_@_+{%_higher_Exalted_Stamp_bonuses"},{"name":"Abomination_Slayer_XVIII","x1":8,"x2":1.45,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1748,"x8":398,"x9":0,"x10":4,"description":"You_have_slain_the_neyeptune_abomination!_@_+{%_cheaper_Compass_upgrade_costs"},{"name":"Abomination_Slayer_XIX","x1":8,"x2":1.25,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1707,"x8":318,"x9":0,"x10":4,"description":"You_have_slain_the_bloodbone_abomination!_@_+{%_Tempest_DMG_per_POW_10_HP"},{"name":"Abomination_Slayer_XX","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":1669,"x8":242,"x9":0,"x10":4,"description":"You_have_slain_the_purple_mushroom_abomination!_@_+{%_Tempest_Accuracy"},{"name":"Abomination_Slayer_XXI","x1":8,"x2":4.65,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1631,"x8":173,"x9":0,"x10":4,"description":"You_have_slain_the_donut_abomination!_@_+{%_bonus_from_ALL_circle_shaped_compass_upgrades"},{"name":"Abomination_Slayer_XXII","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":1680,"x8":105,"x9":0,"x10":4,"description":"You_have_slain_the_soda_abomination!_@_+{_Base_Tempest_Damage"},{"name":"Abomination_Slayer_XXIII","x1":8,"x2":1.12,"x3":2,"x4":999999,"x5":3,"x6":0,"x7":1760,"x8":115,"x9":0,"x10":4,"description":"You_have_slain_the_gelatinous_cuboid_abomination!_@_+{%_Tempest_Stone_drop_chance"},{"name":"Abomination_Slayer_XXIV","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1832,"x8":155,"x9":0,"x10":4,"description":"You_have_slain_the_worm_abomination!_@_+{%_Tempest_Defence"},{"name":"Abomination_Slayer_XXV","x1":8,"x2":1.25,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":1876,"x8":225,"x9":0,"x10":4,"description":"You_have_slain_the_squid_abomination!_@_+{%_Tempest_Accuracy_per_POW_10_HP"},{"name":"Abomination_Slayer_XXVI","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":1896,"x8":300,"x9":0,"x10":4,"description":"You_have_slain_the_grilled_cheese_abomination!_@_+{%_Tempest_Damage"},{"name":"Abomination_Slayer_XXVII","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":1914,"x8":378,"x9":0,"x10":4,"description":"You_have_slain_the_stiltmole_abomination!_@_+{%_Novadust_drop_chance"},{"name":"Abomination_Slayer_XXVIII","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1926,"x8":454,"x9":0,"x10":4,"description":"You_have_slain_the_purgatory_twins_abomination!_@_+{_Base_Tempest_HP"},{"name":"Abomination_Slayer_XXIX","x1":8,"x2":1.5,"x3":1,"x4":999999,"x5":0.1,"x6":0,"x7":1918,"x8":529,"x9":0,"x10":4,"description":"You_have_slain_the_lampar_abomination!_@_+{_sec_invulnerability_time_in_Tempest_Form"},{"name":"Abomination_Slayer_XXX","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":1885,"x8":601,"x9":0,"x10":4,"description":"You_have_slain_the_tremor_wurm_abomination!_@_+{%_Extra_Dust"},{"name":"Abomination_Slayer_XXXI","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1847,"x8":674,"x9":0,"x10":4,"description":"You_have_slain_the_sprout_abomination!_@_+{%_Tempest_Accuracy"},{"name":"Abomination_Slayer_XXXII","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":1808,"x8":743,"x9":0,"x10":4,"description":"You_have_slain_the_woodlin_abomination!_@_+{%_Tempest_Defence"},{"name":"Abomination_Slayer_XXXIII","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1777,"x8":815,"x9":0,"x10":4,"description":"You_have_slain_the_lantern_abomination!_@_+{%_Tempest_HP"},{"name":"Abomination_Slayer_XXXIV","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":1760,"x8":887,"x9":0,"x10":4,"description":"You_have_slain_the_ceramic_abomination!_@_+{%_Extra_Dust"},{"name":"Abomination_Slayer_XXXV","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":1751,"x8":959,"x9":0,"x10":4,"description":"You_have_slain_the_egg_abomination!_@_+{%_Tempest_Damage"},{"name":"Abomination_Slayer_XXXVI","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":1784,"x8":1029,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XXXVII","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":1855,"x8":1059,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XXXVIII","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":1931,"x8":1037,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XXXIX","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":1973,"x8":971,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XL","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":2002,"x8":904,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XLI","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":2017,"x8":834,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XLII","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":2004,"x8":763,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XLIII","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":2019,"x8":691,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XLIV","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":2045,"x8":622,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XLV","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":2081,"x8":553,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Abomination_Slayer_XLVI","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":2122,"x8":486,"x9":0,"x10":4,"description":"Titan_doesnt_exist"},{"name":"Weapon_Drops","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":336,"x8":458,"x9":1,"x10":0,"description":"+{%_drop_chance_for_all_Tempest_Weapons","baseIconIndex":2},{"name":"Medallion_Drops","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":110,"x8":440,"x9":1,"x10":0,"description":"+{%_drop_chance_for_all_monster_Medallions","baseIconIndex":2},{"name":"Grass_Weapon_Drops","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":216,"x8":360,"x9":1,"x10":0,"description":"+{%_chance_for_Grass_Tempest_Weapon_that_drop_to_be_more_powerful","baseIconIndex":2},{"name":"Fire_Weapon_Drops","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":186,"x8":286,"x9":1,"x10":0,"description":"+{%_chance_for_Fire_Tempest_Weapons_that_drop_to_be_more_powerful","baseIconIndex":2},{"name":"Stone_Drops_I","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":2,"x6":0,"x7":80,"x8":256,"x9":1,"x10":0,"description":"+{%_drop_chance_for_all_Tempest_Stones","baseIconIndex":2},{"name":"Lucky_Drops_I","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":102,"x8":120,"x9":1,"x10":0,"description":"+{%_drop_chance_for_ALL_Tempest_items._Weapons,_stones,_rings,_all_of_them!","baseIconIndex":2},{"name":"Ring_Drops_I","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":1,"x6":0,"x7":218,"x8":108,"x9":1,"x10":0,"description":"+{%_drop_chance_for_Tempest_Rings_that_give_weird_stats_unrelated_to_element_damage","baseIconIndex":2},{"name":"Stone_Drops_II","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":3,"x6":0,"x7":292,"x8":166,"x9":1,"x10":0,"description":"+{%_drop_chance_for_Tempest_Rings_that_give_element_damage","baseIconIndex":2},{"name":"Wind_Weapon_Drops","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":378,"x8":106,"x9":1,"x10":0,"description":"+{%_chance_for_Wind_Tempest_Weapons_that_drop_to_be_more_powerful","baseIconIndex":2},{"name":"Lucky_Drops_II","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":542,"x8":70,"x9":1,"x10":0,"description":"+{%_drop_chance_for_ALL_Tempest_items!","baseIconIndex":2},{"name":"Lucky_Drops_III","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":1,"x6":0,"x7":552,"x8":192,"x9":1,"x10":0,"description":"+{%_drop_chance_for_ALL_Tempest_items!","baseIconIndex":2},{"name":"Ice_Weapon_Drops","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":1,"x6":0,"x7":408,"x8":270,"x9":1,"x10":0,"description":"+{%_chance_for_Ice_Tempest_Weapons_that_drop_to_be_more_powerful","baseIconIndex":2},{"name":"Ring_Drops_II","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":566,"x8":305,"x9":1,"x10":1,"description":"+{%_drop_chance_for_all_Tempest_Rings","baseIconIndex":2},{"name":"Tempest_Damage_I","x1":8,"x2":1.04,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":771,"x8":325,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form","baseIconIndex":3},{"name":"Tempest_Accuracy_I","x1":8,"x2":1.03,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":953,"x8":393,"x9":1,"x10":1,"description":"+{%_accuracy_in_Tempest_Form","baseIconIndex":4},{"name":"Tempest_Damage_IV","x1":8,"x2":1.06,"x3":1,"x4":999999,"x5":2,"x6":0,"x7":786,"x8":151,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form_@_Also,_Weapon_Power_from_your_Tempest_Equipment_is_giving_you_$_DMG!","baseIconIndex":3},{"name":"Tempest_Damage_II","x1":8,"x2":1.04,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":918,"x8":243,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form","baseIconIndex":3},{"name":"Tempest_Damage_III","x1":8,"x2":1.05,"x3":0,"x4":999999,"x5":2,"x6":0,"x7":1018,"x8":298,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form_@_+{%_Critical_DMG_in_Tempest_Form","baseIconIndex":3},{"name":"Tempest_Accuracy_II","x1":8,"x2":1.04,"x3":0,"x4":999999,"x5":2,"x6":0,"x7":1120,"x8":339,"x9":1,"x10":1,"description":"+{%_accuracy_in_Tempest_Form","baseIconIndex":4},{"name":"Tempest_Accuracy_III","x1":8,"x2":1.05,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":827,"x8":70,"x9":1,"x10":1,"description":"+{%_accuracy_in_Tempest_Form_@_+{%_Multishot_chance_in_Tempest_Form","baseIconIndex":4},{"name":"Tempest_Damage_X","x1":1,"x2":1.04,"x3":4,"x4":999999,"x5":6,"x6":0,"x7":895,"x8":25,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form","baseIconIndex":3},{"name":"Tempest_Damage_VII","x1":8,"x2":1.09,"x3":2,"x4":999999,"x5":4,"x6":0,"x7":959,"x8":67,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form","baseIconIndex":3},{"name":"Tempest_Accuracy_V","x1":8,"x2":1.07,"x3":2,"x4":999999,"x5":4,"x6":0,"x7":1024,"x8":133,"x9":1,"x10":1,"description":"+{%_accuracy_in_Tempest_Form","baseIconIndex":4},{"name":"Tempest_Damage_V","x1":8,"x2":1.07,"x3":1,"x4":999999,"x5":3,"x6":0,"x7":1075,"x8":199,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form","baseIconIndex":3},{"name":"Tempest_Damage_VI","x1":8,"x2":1.08,"x3":2,"x4":999999,"x5":3,"x6":0,"x7":1194,"x8":287,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form","baseIconIndex":3},{"name":"Tempest_Accuracy_VII","x1":8,"x2":1.09,"x3":3,"x4":999999,"x5":6,"x6":0,"x7":1107,"x8":66,"x9":1,"x10":1,"description":"+{%_accuracy_in_Tempest_Form","baseIconIndex":4},{"name":"Tempest_Damage_VIII","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":4,"x6":0,"x7":1213,"x8":136,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form","baseIconIndex":3},{"name":"Tempest_Accuracy_VI","x1":8,"x2":1.08,"x3":2,"x4":999999,"x5":5,"x6":0,"x7":1187,"x8":202,"x9":1,"x10":1,"description":"+{%_accuracy_in_Tempest_Form","baseIconIndex":4},{"name":"Tempest_Accuracy_IV","x1":8,"x2":1.06,"x3":1,"x4":999999,"x5":3,"x6":0,"x7":1276,"x8":255,"x9":1,"x10":1,"description":"+{%_accuracy_in_Tempest_Form","baseIconIndex":4},{"name":"Tempest_Damage_IX","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":5,"x6":0,"x7":1171,"x8":9,"x9":1,"x10":1,"description":"+{%_damage_in_Tempest_Form","baseIconIndex":3},{"name":"Tempest_Accuracy_VIII","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":7,"x6":0,"x7":1333,"x8":104,"x9":1,"x10":1,"description":"+{%_accuracy_in_Tempest_Form","baseIconIndex":4},{"name":"Tempest_Defence_I","x1":8,"x2":1.05,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":456,"x8":697,"x9":1,"x10":2,"description":"+{%_defence_in_Tempest_Form","baseIconIndex":1},{"name":"Tempest_Defence_III","x1":8,"x2":1.08,"x3":1,"x4":999999,"x5":3,"x6":0,"x7":302,"x8":592,"x9":1,"x10":2,"description":"+{%_defence_in_Tempest_Form","baseIconIndex":1},{"name":"De_Dust_I","x1":8,"x2":1.1,"x3":0,"x4":999999,"x5":1,"x6":0,"x7":414,"x8":759,"x9":1,"x10":2,"description":"+{%_Extra_Dust","baseIconIndex":0},{"name":"Tempest_Health_I","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":192,"x8":696,"x9":1,"x10":2,"description":"+{%_total_health_in_Tempest_Form","baseIconIndex":5},{"name":"Tempest_Defence_II","x1":8,"x2":1.06,"x3":0,"x4":999999,"x5":2,"x6":0,"x7":332,"x8":770,"x9":1,"x10":2,"description":"+{%_defence_in_Tempest_Form_@_+{%_Movement_Speed_in_Tempest_Form","baseIconIndex":1},{"name":"De_Dust_II","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":1,"x6":0,"x7":480,"x8":806,"x9":1,"x10":2,"description":"+{%_Extra_Dust","baseIconIndex":0},{"name":"Tempest_Defence_VI","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":6,"x6":0,"x7":590,"x8":952,"x9":1,"x10":2,"description":"+{%_defence_in_Tempest_Form","baseIconIndex":1},{"name":"Tempest_Defence_IV","x1":8,"x2":1.09,"x3":2,"x4":999999,"x5":4,"x6":0,"x7":6,"x8":722,"x9":1,"x10":2,"description":"+{%_defence_in_Tempest_Form","baseIconIndex":1},{"name":"De_Dust_III","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":2,"x6":0,"x7":134,"x8":792,"x9":1,"x10":2,"description":"+{%_Extra_Dust","baseIconIndex":0},{"name":"Tempest_Health_II","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":2,"x6":0,"x7":236,"x8":856,"x9":1,"x10":2,"description":"+{%_total_health_in_Tempest_Form","baseIconIndex":5},{"name":"Tempest_Accuracy..?","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":3,"x6":0,"x7":416,"x8":946,"x9":1,"x10":2,"description":"+{%_accur.._wait,_accuracy?_What_are_you_doing_in_this_section?","baseIconIndex":4},{"name":"De_Dust_IV","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":2,"x6":0,"x7":68,"x8":870,"x9":1,"x10":2,"description":"+{%_Extra_Dust","baseIconIndex":0},{"name":"Tempest_Defence_V","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":5,"x6":0,"x7":198,"x8":966,"x9":1,"x10":2,"description":"+{%_defence_in_Tempest_Form","baseIconIndex":1},{"name":"De_Dust_V","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":3,"x6":0,"x7":354,"x8":1008,"x9":1,"x10":2,"description":"+{%_Extra_Dust","baseIconIndex":0},{"name":"Sneaky_Sale_I","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":5,"x6":0,"x7":745,"x8":792,"x9":1,"x10":2,"description":"+{%_reduction_in_cost_for_the_Moon_of_Sneak_upgrade","baseIconIndex":6},{"name":"Sneaky_Sale_II","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":10,"x6":0,"x7":879,"x8":881,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Sneak_upgrade","baseIconIndex":6},{"name":"Sneaky_Sale_III","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":20,"x6":0,"x7":798,"x8":927,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Sneak_upgrade","baseIconIndex":6},{"name":"Printer_Sale_I","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":5,"x6":0,"x7":993,"x8":711,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Print_upgrade","baseIconIndex":7},{"name":"Damage_Sale_I","x1":8,"x2":1.1,"x3":1,"x4":999999,"x5":5,"x6":0,"x7":1007,"x8":805,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Damage_upgrade","baseIconIndex":9},{"name":"Printer_Sale_II","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":10,"x6":0,"x7":1101,"x8":637,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Print_upgrade","baseIconIndex":7},{"name":"Damage_Sale_II","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":10,"x6":0,"x7":988,"x8":946,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Damage_upgrade","baseIconIndex":9},{"name":"Damage_Sale_III","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":15,"x6":0,"x7":1091,"x8":949,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Damage_upgrade","baseIconIndex":9},{"name":"Snoozer_Sale_I","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":5,"x6":0,"x7":1142,"x8":1015,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Sleep_upgrade","baseIconIndex":10},{"name":"Snoozer_Sale_II","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":10,"x6":0,"x7":1124,"x8":1110,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Sleep_upgrade","baseIconIndex":10},{"name":"Snoozer_Sale_III","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":15,"x6":0,"x7":1232,"x8":998,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Sleep_upgrade","baseIconIndex":10},{"name":"Experience_Sale_I","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":5,"x6":0,"x7":1157,"x8":827,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Experience_upgrade","baseIconIndex":8},{"name":"Experience_Sale_II","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":10,"x6":0,"x7":1187,"x8":749,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Experience_upgrade","baseIconIndex":8},{"name":"Experience_Sale_III","x1":8,"x2":1.1,"x3":2,"x4":999999,"x5":15,"x6":0,"x7":1269,"x8":707,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Experience_upgrade","baseIconIndex":8},{"name":"Pristine_Sale_I","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":5,"x6":0,"x7":1415,"x8":648,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Pristine_Collector_upgrade","baseIconIndex":10},{"name":"Experience_Sale_IV","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":20,"x6":0,"x7":1377,"x8":783,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Experience_upgrade","baseIconIndex":8},{"name":"Experience_Sale_V","x1":8,"x2":1.1,"x3":3,"x4":999999,"x5":25,"x6":0,"x7":1267,"x8":875,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Experience_upgrade","baseIconIndex":8},{"name":"Snoozer_Sale_IV","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":20,"x6":0,"x7":1335,"x8":1068,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Moon_of_Sleep_upgrade","baseIconIndex":10},{"name":"Pristine_Sale_II","x1":8,"x2":1.1,"x3":4,"x4":999999,"x5":10,"x6":0,"x7":1504,"x8":726,"x9":1,"x10":3,"description":"+{%_reduction_in_cost_for_the_Pristine_Collector_upgrade","baseIconIndex":10},{"name":"Worldfinder","x1":2,"x2":1.1,"x3":0,"x4":1,"x5":1,"x6":0,"x7":670,"x8":450,"x9":0,"x10":0,"description":"You_can_open_portals_to_the_next_world_by_defeating_enough_Abominations._The_amount_is_shown_above_each_town_portal!","baseIconIndex":11},{"name":"Stop_Drop_and_Roll","x1":5000,"x2":1.1,"x3":0,"x4":1,"x5":1,"x6":0,"x7":637,"x8":368,"x9":0,"x10":0,"description":"You_can_now_toggle_Tempest_drops._Just_click_off_the_TOGGLE_button_found_in_the_description_of_the_'tempest_drop'_upgrades!","baseIconIndex":12},{"name":"Grumblo's_Guarantee","x1":20000,"x2":1.1,"x3":0,"x4":1,"x5":1,"x6":0,"x7":666,"x8":286,"x9":0,"x10":0,"description":"You_can_now_GUARANTEE_a_Tempest_stone_to_succeed_by_dragging_a_stack_of_500_at_once._This_will_use_up_500_stones.","baseIconIndex":13}];
        const ABOMINATIONS_DATA = [{"name":"Mushgloom","x1":100,"x2":1,"x3":3,"x4":600,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":10,"x11":9,"x12":17},{"name":"Bean_of_Eternal_Boredom","x1":100,"x2":14,"x3":3,"x4":520,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":15,"x11":13,"x12":0},{"name":"Caroot_the_Sorrowful","x1":100,"x2":24,"x3":1,"x4":600,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":20,"x11":25,"x12":11},{"name":"Croakmaw","x1":100,"x2":28,"x3":2,"x4":420,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":25,"x11":31,"x12":1},{"name":"Oakguard_the_Large","x1":100,"x2":30,"x3":3,"x4":480,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":10,"x11":82,"x12":54},{"name":"Coilfur_the_Malformed","x1":100,"x2":15,"x3":7,"x4":520,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":500,"x11":10,"x12":7},{"name":"Puttputt_the_Ashen","x1":100,"x2":51,"x3":0,"x4":200,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":75,"x11":22,"x12":0},{"name":"The_Baker","x1":100,"x2":53,"x3":6,"x4":925,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":100,"x11":35,"x12":47},{"name":"Dunecastle_Duo","x1":100,"x2":58,"x3":3,"x4":500,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":130,"x11":161,"x12":72},{"name":"Dreadlord_Pringle","x1":100,"x2":60,"x3":3,"x4":1050,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":160,"x11":25,"x12":50},{"name":"Astralis_the_Forsaken","x1":100,"x2":63,"x3":5,"x4":450,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":200,"x11":47,"x12":10},{"name":"The_Trapped_Dozen","x1":100,"x2":61,"x3":0,"x4":770,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":2500,"x11":38,"x12":2},{"name":"Grand_Old_Snelbie","x1":100,"x2":65,"x3":4,"x4":690,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":350,"x11":68,"x12":26},{"name":"Frostmire_the_Jagged","x1":100,"x2":103,"x3":2,"x4":175,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":400,"x11":31,"x12":40},{"name":"Baloqui_the_Melted","x1":100,"x2":105,"x3":7,"x4":200,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":600,"x11":28,"x12":61},{"name":"The_Snowmatron","x1":100,"x2":107,"x3":3,"x4":1135,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":800,"x11":84,"x12":29},{"name":"Bobo_the_Fractured","x1":100,"x2":110,"x3":4,"x4":676,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":900,"x11":42,"x12":66},{"name":"Overlord_Oculon","x1":100,"x2":113,"x3":4,"x4":480,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":1050,"x11":47,"x12":34},{"name":"Bloodbane_the_Conglomerate","x1":100,"x2":117,"x3":0,"x4":630,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":1200,"x11":64,"x12":24},{"name":"Blightcap","x1":100,"x2":151,"x3":3,"x4":320,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":1500,"x11":30,"x12":33},{"name":"Doughdough_the_Tired","x1":100,"x2":153,"x3":1,"x4":380,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":2000,"x11":19,"x12":0},{"name":"Purple_Flurp","x1":100,"x2":155,"x3":10,"x4":400,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":3000,"x11":38,"x12":24},{"name":"Goregloop","x1":100,"x2":157,"x3":5,"x4":560,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":4500,"x11":29,"x12":21},{"name":"The_Watchful_Spire","x1":100,"x2":159,"x3":11,"x4":1346,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":7000,"x11":20,"x12":11},{"name":"The_Unblinking_Eye","x1":100,"x2":163,"x3":7,"x4":427,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":10000,"x11":89,"x12":7},{"name":"Cheezer_Deluxe","x1":100,"x2":202,"x3":2,"x4":322,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":12000,"x11":122,"x12":5},{"name":"Bignose_the_Fallen","x1":100,"x2":205,"x3":9,"x4":720,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":14000,"x11":76,"x12":4},{"name":"Moltix_and_Cragg","x1":100,"x2":207,"x3":7,"x4":210,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":17000,"x11":31,"x12":15},{"name":"Lyvii_the_Broken","x1":100,"x2":209,"x3":4,"x4":400,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":20000,"x11":39,"x12":1},{"name":"Ouroboros_the_Consumer","x1":100,"x2":213,"x3":7,"x4":222,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":25000,"x11":84,"x12":5},{"name":"Gigadew_of_the_Valley","x1":100,"x2":251,"x3":2,"x4":554,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":35000,"x11":41,"x12":35},{"name":"Splinteroot","x1":100,"x2":255,"x3":4,"x4":1018,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":50000,"x11":48,"x12":19},{"name":"Glanceron_the_Illuminator","x1":100,"x2":257,"x3":4,"x4":1115,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":100000,"x11":9,"x12":26},{"name":"Wisperius_the_Forgotten","x1":100,"x2":260,"x3":4,"x4":300,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":200000,"x11":70,"x12":0},{"name":"Pyol_the_Estranged","x1":100,"x2":262,"x3":15,"x4":740,"x5":1,"x6":1,"x7":1,"x8":1,"x9":0,"x10":500000,"x11":57,"x12":7}];
        
        const BONE_COINS = {
            femur:   { name: "Femur",   img: "images/grimoire_femur.png" },
            ribcage: { name: "Ribcage", img: "images/grimoire_ribcage.png" },
            cranium: { name: "Cranium", img: "images/grimoire_cranium.png" },
            bovinae: { name: "Bovinae", img: "images/grimoire_bovinae.png" }
        };
        const TACHYON_COINS = {
            purple: { name: "Purple", img: "images/tesseract_purple.png" },
            brown:  { name: "Brown",  img: "images/tesseract_brown.png" },
            green:  { name: "Green",  img: "images/tesseract_green.png" },
            red:    { name: "Red",    img: "images/tesseract_red.png" },
            silver: { name: "Silver", img: "images/tesseract_silver.png" },
            gold:   { name: "Gold",   img: "images/tesseract_gold.png" }
        };
        const COMPASS_COINS = {
            stardust: { name: "Stardust", img: "images/compass_stardust.png" },
            moondust: { name: "Moondust", img: "images/compass_moondust.png" },
            sundust:  { name: "Sundust",  img: "images/compass_sundust.png" },
            cooldust: { name: "Cooldust", img: "images/compass_cooldust.png" },
            novadust: { name: "Novadust", img: "images/compass_novadust.png" }
        };

        const COMPASS_UPGRADE_CATEGORIES = {
            damage: {
                name: 'Damage',
                upgradeIndices: [6,8,10,14,15,16,20,21,24,25,48,60,64,66,69,74,75,81,85,94,112,113,119,121,122,123,126,127,129,130,132,135,155,157,158]
            },
            dust: {
                name: 'Dust',
                upgradeIndices: [22,30,31,33,34,38,68,86,89,93,139,142,145,148,150]
            },
            accuracy: {
                name: 'Accuracy',
                upgradeIndices: [6,17,19,22,25,61,79,84,90,120,124,125,128,131,133,134,136,147]
            },
            defence: {
                name: 'Defence',
                upgradeIndices: [29,30,63,83,91,137,138,141,143,144,149]
            },
            crit: {
                name: 'Crit',
                upgradeIndices: [16,20,66,75,123]
            },
            attackSpeed: {
                name: 'Attack Speed',
                upgradeIndices: [21,69]
            },
            hp: {
                name: 'HP',
                upgradeIndices: [28,78,87,92,140,146]
            }
        };

        const formatNumber = (num) => { if (isNaN(num) || num === null) return '0'; if (num > Number.MAX_SAFE_INTEGER || num.toString().includes('e')) return num.toExponential(2); return Math.floor(num).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); };
        const parseFormattedNumber = (str) => parseInt(String(str).replace(/,/g, ''), 10) || 0;
        function openTab(tabName) { document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active')); document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active')); document.getElementById(tabName).classList.add('active'); document.querySelector(`.tab-button[onclick="openTab('${tabName}')"]`).classList.add('active'); }

        const formatTimeInHours = (timeInHours) => {
            if (timeInHours === Infinity || isNaN(timeInHours)) return '∞';
            return `${timeInHours.toFixed(2)} hours`;
        };

        const calculators = {};

        const BONE_COIN_MAP = ["femur", "ribcage", "cranium", "bovinae"];
        const transformedGrimoireData = GRIMOIRE_ITEMS_DATA.map((raw, index) => ({
            id: `g-item${index + 1}`,
            name: raw.name.replace(/_/g, ' ').replace(/製/g, '').replace(/\(Tap for more info\)/, '').replace(/\(#\)/g, '').trim(),
            coin: BONE_COIN_MAP[raw.boneType],
            tier: index,
            base: raw.x1,
            expo: raw.x2,
            toUnlock: raw.unlockLevel,
            maxLevel: raw.x4 === 999999 ? null : raw.x4
        }));

        function initializeCalculator(config) {
            let levels = {}, productionRates = {}, playerStats = {}, filters = { hideLocked: false, hideMaxed: false };
            let categoryFilterFn = (item) => true;
            const { id, itemsData, coins, storageKeys, costFn, playerStatFields, unlockFn, productionTitle  } = config;
            const tabEl = document.getElementById(id);
            tabEl.innerHTML = `
                <div class="container">
                    <div class="main-content">
                        <div class="card">
                            <h2 id="${id}-prod-title"></h2>
                            <div id="${id}-production" class="production-grid"></div>
                            <div id="${id}-player-stats-wrapper"></div>
                        </div>
                         <div class="card controls-container">
                            <div class="controls-wrapper">
                                <input type="text" id="${id}-search-input" class="search-input-field" placeholder="Search for an item by name...">
                                <div class="filter-controls">
                                    <label for="${id}-hide-locked-check" class="filter-label" data-label-text="Hide Locked">
                                        <input type="checkbox" id="${id}-hide-locked-check">
                                    </label>
                                    <label for="${id}-hide-maxed-check" class="filter-label" data-label-text="Hide Maxed">
                                        <input type="checkbox" id="${id}-hide-maxed-check">
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div id="${id}-item-list-container">
                            <div class="total-level-display">
                                <h2>Total Levels: <span id="${id}-total-level">0</span></h2>
                                <p id="${id}-next-unlock-time" class="unlock-text" style="margin-top: 0.5rem;"></p>
                            </div>
                            <div id="${id}-item-list" class="item-list"></div>
                        </div>
                    </div>
                    <div class="sidebar">
                        <div class="card">
                            <h2>Fastest to Level Up</h2>
                            <div id="${id}-top-list" class="top-list"></div>
                        </div>
                    </div>
                </div>`;

            const productionEl = document.getElementById(`${id}-production`);
            const itemListEl = document.getElementById(`${id}-item-list`);
            const topListEl = document.getElementById(`${id}-top-list`);
            const totalLevelEl = document.getElementById(`${id}-total-level`);
            const playerStatsWrapperEl = document.getElementById(`${id}-player-stats-wrapper`);
            const searchInputEl = document.getElementById(`${id}-search-input`);

            topListEl.addEventListener('click', e => {
                if (e.target.matches('.top-list-level-up-btn')) {
                    e.preventDefault();
                    const itemId = e.target.dataset.levelupId;
                    if (!itemId) return;

                    const item = itemsData.find(i => i.id === itemId);
                    if (!item) return;

                    let currentLevel = levels[itemId] || 0;
                    if (item.maxLevel !== null && currentLevel >= item.maxLevel) {
                        return; 
                    }
                    
                    levels[itemId] = currentLevel + 1;
                    saveLevels();
                    updateAllUI(); 
                }
            });

            const saveLevels = () => localStorage.setItem(storageKeys.levels, JSON.stringify(levels));
            const loadLevels = () => { const saved = JSON.parse(localStorage.getItem(storageKeys.levels) || '{}'); itemsData.forEach(item => { levels[item.id] = saved[item.id] || 0; }); };
            const saveFilters = () => {
                localStorage.setItem(storageKeys.filters, JSON.stringify({ hideLocked: filters.hideLocked, hideMaxed: filters.hideMaxed }));
            };
            const loadFilters = () => { 
                filters.hideLocked = JSON.parse(localStorage.getItem(storageKeys.filters) || '{"hideLocked":false}').hideLocked;
                filters.hideMaxed = JSON.parse(localStorage.getItem(storageKeys.filters) || '{"hideMaxed":false}').hideMaxed;
            };
            const saveProductionRates = () => localStorage.setItem(storageKeys.production, JSON.stringify(productionRates));
            const loadProductionRates = () => { const saved = JSON.parse(localStorage.getItem(storageKeys.production) || '{}'); Object.keys(coins).forEach(coin => { productionRates[coin] = saved[coin] || 0; }); };
            const savePlayerStats = () => playerStats && localStorage.setItem(storageKeys.playerStats, JSON.stringify(playerStats));
            const loadPlayerStats = () => { if (playerStatFields) { const saved = JSON.parse(localStorage.getItem(storageKeys.playerStats) || '{}'); Object.keys(playerStatFields).forEach(field => { const subFields = playerStatFields[field].fields; Object.keys(subFields).forEach(subKey => { playerStats[subKey] = saved[subKey] ?? subFields[subKey].default ?? 0; }); }); } };
            
            const updateItemUI = (item, totalLevel) => {
                const card = document.getElementById(item.id); if (!card) return;
                const isLocked = !unlockFn(item, totalLevel, levels, playerStats);
                const currentLevel = levels[item.id] || 0; 
                const isMaxed = item.maxLevel !== null && currentLevel >= item.maxLevel;
                card.classList.toggle('locked', isLocked);
                const costEl = card.querySelector(`[data-cost-id="${item.id}"]`); 
                const unlockEl = card.querySelector(`[data-unlock-id="${item.id}"]`);
                if (isLocked) { 
                    costEl.textContent = 'Locked'; 
                    let unlockMsg = ''; 
                    
                    if (id === 'grimoire' || id === 'tesseract') {
                        const remainingLevels = item.toUnlock - totalLevel;
                        unlockMsg = `(needs ${remainingLevels} more levels)`;
                    } else if (id === 'compass') {
                        if (item.pathName === "Abominations") {
                            unlockMsg = `(Defeat ${item.abomName || 'Unknown'})`;
                        } else if (item.pathName && item.pathUnlockLevel) {
                            let controlItemId;
                            switch(item.pathName) {
                                case "Elemental": controlItemId = 'c-item2'; break;
                                case "Fighter":   controlItemId = 'c-item14'; break;
                                case "Survival":  controlItemId = 'c-item28'; break;
                                case "Nomadic":   controlItemId = 'c-item41'; break;
                            }

                            if (controlItemId) {
                                const currentPathLevel = levels[controlItemId] || 0;
                                const levelsNeeded = item.pathUnlockLevel - currentPathLevel;

                                if (levelsNeeded > 0) {
                                    const pluralS = levelsNeeded === 1 ? '' : 's';
                                    unlockMsg = `(Needs ${levelsNeeded} more level${pluralS} in ${item.pathName} Path)`;
                                }
                            }
                        }
                    }

                    unlockEl.textContent = unlockMsg; 
                } else { 
                    costEl.textContent = formatNumber(costFn(item, currentLevel, playerStats, levels)); 
                    unlockEl.textContent = item.maxLevel ? `(max ${item.maxLevel})` : ''; 
                }
                card.querySelector(`[data-level-input-id="${item.id}"]`).value = formatNumber(currentLevel); 
                card.querySelector(`[data-level-up-btn-id="${item.id}"]`).disabled = isLocked || isMaxed; 
                card.querySelector(`[data-level-down-btn-id="${item.id}"]`).disabled = isLocked || currentLevel === 0; 
                card.querySelector(`[data-level-input-id="${item.id}"]`).disabled = isLocked;
            };
            
            const updateTopList = (totalLevel) => {
                const tempLevels = JSON.parse(JSON.stringify(levels));
                const consolidatedList = [];

                while (consolidatedList.length < 10) {
                    const eligibleItems = itemsData
                        .filter(item => 
                            unlockFn(item, totalLevel, tempLevels, playerStats) &&
                            !(item.maxLevel !== null && tempLevels[item.id] >= item.maxLevel)
                        )
                        .filter(categoryFilterFn);
                    
                    if (eligibleItems.length === 0) break;

                    const itemsWithTimeToLevel = eligibleItems.map(item => {
                        const cost = costFn(item, tempLevels[item.id], playerStats, tempLevels);
                        const rate = productionRates[item.coin] || 0;
                        return { ...item, timeToLevel: rate > 0 ? cost / rate : Infinity };
                    }).sort((a, b) => a.timeToLevel - b.timeToLevel);
                    
                    if (itemsWithTimeToLevel.length === 0 || itemsWithTimeToLevel[0].timeToLevel === Infinity) break;

                    const fastestItem = itemsWithTimeToLevel[0];
                    
                    if (consolidatedList.length > 0 && consolidatedList[consolidatedList.length - 1].item.id === fastestItem.id) {
                        consolidatedList[consolidatedList.length - 1].count++;
                    } else {
                        consolidatedList.push({ item: fastestItem, count: 1 });
                    }
                    
                    tempLevels[fastestItem.id]++;
                }
                
                let topListHTML = '<ol>';
                consolidatedList.forEach(({ item, count }) => {
                    const coin = coins[item.coin];
                    let timeText = '∞';
                    const timeInHours = item.timeToLevel; 
                    if (timeInHours !== Infinity) { if (timeInHours < (1/60)) { timeText = `${(timeInHours * 3600).toFixed(0)}s`; } else if (timeInHours < 1) { timeText = `${(timeInHours * 60).toFixed(1)}m`; } else if (timeInHours < 24) { timeText = `${timeInHours.toFixed(1)}h`; } else { timeText = `${(timeInHours / 24).toFixed(1)}d`; } }
                    const countDisplay = count > 1 ? `<span class="multi-level-count">(x${count})</span>` : '';

                    topListHTML += `<li><div class="top-list-item-content"><span class="top-list-item-name" title="${item.name}">${item.name}${countDisplay}</span><div class="top-list-details"><img src="${coin.img}" title="${coin.name}" class="coin-icon-img"><span class="time">${timeText}</span></div></div><button class="top-list-level-up-btn" data-levelup-id="${item.id}" title="Level up ${item.name}">+</button></li>`;
                });
                topListEl.innerHTML = topListHTML + '</ol>';
            };

            const updateNextUnlockTime = (totalLevel) => {
                const nextUnlockTimeEl = document.getElementById(`${id}-next-unlock-time`);
                if (!nextUnlockTimeEl) return;
                const nextUnlockItem = itemsData.find(item => item.toUnlock > totalLevel);
                if (!nextUnlockItem) {
                    nextUnlockTimeEl.textContent = 'All items unlocked!';
                    return;
                }
                const levelsNeeded = nextUnlockItem.toUnlock - totalLevel;
                const simulatedLevels = JSON.parse(JSON.stringify(levels));
                let simulatedTotalLevel = totalLevel;
                let totalTimeInHours = 0;
                
                while (simulatedTotalLevel < nextUnlockItem.toUnlock) {
                    const eligibleItems = itemsData.filter(item =>
                        unlockFn(item, simulatedTotalLevel, simulatedLevels, playerStats) &&
                        !(item.maxLevel !== null && simulatedLevels[item.id] >= item.maxLevel)
                    );
                    
                    if (eligibleItems.length === 0) {
                        nextUnlockTimeEl.innerHTML = `Next unlock in <strong>${levelsNeeded}</strong> levels.<br>(Cannot calculate time without eligible items to level up).`;
                        return;
                    }
                    
                    const itemWithMinTime = eligibleItems.reduce((minItem, item) => {
                        const itemLevel = simulatedLevels[item.id] || 0;
                        const cost = costFn(item, itemLevel, playerStats, simulatedLevels);
                        const rate = productionRates[item.coin] || 0;
                        const timeToLevelUp = rate > 0 ? cost / rate : Infinity;
                        
                        if (timeToLevelUp < minItem.timeToLevelUp) {
                            return { item, timeToLevelUp };
                        }
                        return minItem;
                    }, { item: null, timeToLevelUp: Infinity });
                    
                    if (itemWithMinTime.timeToLevelUp === Infinity) {
                        nextUnlockTimeEl.innerHTML = `Next unlock in <strong>${levelsNeeded}</strong> levels.<br>(Cannot calculate time without production rates).`;
                        return;
                    }
                    
                    totalTimeInHours += itemWithMinTime.timeToLevelUp;
                    
                    simulatedLevels[itemWithMinTime.item.id]++;
                    simulatedTotalLevel++;
                }
                
                const titleAttribute = `title="Next unlock is '${nextUnlockItem.name}'"`;
                nextUnlockTimeEl.innerHTML = `<span ${titleAttribute}>Next Unlock: <strong>~${formatTimeInHours(totalTimeInHours)}</strong></span>`;
            };

            const updateAllUI = () => { const totalLevel = Object.values(levels).reduce((sum, level) => sum + level, 0); totalLevelEl.textContent = formatNumber(totalLevel); itemsData.forEach(item => updateItemUI(item, totalLevel)); updateTopList(totalLevel); 
                if (id === 'grimoire' || id === 'tesseract') {
                    updateNextUnlockTime(totalLevel);
                }
                applyAllFilters(); 
            };

            const applyAllFilters = () => {
                const searchTerm = searchInputEl.value.toLowerCase().trim();
                filters.hideLocked = document.getElementById(`${id}-hide-locked-check`).checked;
                filters.hideMaxed = document.getElementById(`${id}-hide-maxed-check`).checked;
                saveFilters();

                const totalLevel = Object.values(levels).reduce((sum, level) => sum + level, 0);

                itemsData.forEach(item => {
                    const card = document.getElementById(item.id);
                    if (!card) return;

                    const currentLevel = levels[item.id] || 0;
                    const isLocked = !unlockFn(item, totalLevel, levels, playerStats);
                    const isMaxed = item.maxLevel !== null && currentLevel >= item.maxLevel;

                    const searchMatch = item.name.toLowerCase().includes(searchTerm);
                    const lockedHidden = filters.hideLocked && isLocked;
                    const maxedHidden = filters.hideMaxed && isMaxed;
                    const categoryMatch = categoryFilterFn(item);

                    if (searchMatch && !lockedHidden && !maxedHidden && categoryMatch) {
                        card.style.display = "";
                    } else {
                        card.style.display = "none";
                    }
                });
            };
            
            const renderPlayerStats = () => {
                if(playerStatsWrapperEl && playerStatFields) {
                    let statsHTML = '';
                    for (const key in playerStatFields) {
                        const field = playerStatFields[key];
                        statsHTML += `<hr/><h2>${field.title}</h2><div id="${id}-${key}-stats" class="${field.gridClass || 'production-grid'}">`;
                        for (const subKey in field.fields) {
                        const subField = field.fields[subKey];

                        // Use the new pill button style for abomination checkboxes
                        if (subField.type === 'checkbox' && key === 'manualUnlocks') {
                            statsHTML += `
                                <div class="info-row">
                                    <label for="${id}-stat-${subKey}" class="filter-label" data-label-text="${subField.label}">
                                        <input type="checkbox" id="${id}-stat-${subKey}" data-player-stat="${subKey}" ${playerStats[subKey] ? 'checked' : ''}>
                                    </label>
                                </div>
                            `;
                        } else { 
                            // Render all other fields normally
                            statsHTML += `<div class="info-row"><label for="${id}-stat-${subKey}">${subField.label}:</label>`;
                            if (subField.type === 'checkbox') {
                                statsHTML += `<input type="checkbox" id="${id}-stat-${subKey}" data-player-stat="${subKey}" ${playerStats[subKey] ? 'checked' : ''}>`;
                            } else {
                                statsHTML += `<input type="text" id="${id}-stat-${subKey}" data-player-stat="${subKey}" value="${formatNumber(playerStats[subKey] || 0)}">`;
                            }
                            statsHTML += `</div>`;
                        }
                    }
                        statsHTML += `</div>`;
                    }
                    playerStatsWrapperEl.innerHTML = statsHTML;
                }
            };

            const init = () => {
                loadLevels(); loadProductionRates(); if(playerStatFields) loadPlayerStats(); loadFilters();
                document.getElementById(`${id}-prod-title`).textContent = productionTitle || `${id.charAt(0).toUpperCase() + id.slice(1)} Collection (/hr)`;
                productionEl.innerHTML = Object.keys(coins).map(key => `<div class="info-row"><label class="coin-label"><img src="${coins[key].img}" title="${coins[key].name}" class="coin-icon-img"> ${coins[key].name}:</label><input type="text" data-prod-coin="${key}" value="${formatNumber(productionRates[key])}"></div>`).join('');
                renderPlayerStats();

                if (id === 'compass') {
                    const controlsWrapper = tabEl.querySelector('.controls-wrapper');
                    const categoryFilterContainer = document.createElement('div');
                    categoryFilterContainer.id = 'compass-category-filters';
                    categoryFilterContainer.className = 'filter-controls';
                    Object.assign(categoryFilterContainer.style, {
                        flexWrap: 'wrap',
                        justifyContent: 'flex-start',
                        marginTop: '1rem',
                        gap: '0.5rem 1rem',
                        width: '100%'
                    });

                    let filtersHTML = '';
                    for (const key in COMPASS_UPGRADE_CATEGORIES) {
                        const labelText = COMPASS_UPGRADE_CATEGORIES[key].name;
                        filtersHTML += `
                            <label for="compass-cat-${key}" class="filter-label" data-label-text="${labelText}">
                                <input type="checkbox" id="compass-cat-${key}" data-category-key="${key}">
                            </label>
                        `;
                    }
                    categoryFilterContainer.innerHTML = filtersHTML;
                    controlsWrapper.appendChild(categoryFilterContainer);

                    categoryFilterContainer.addEventListener('change', (e) => {
                        if (e.target.matches('input[type="checkbox"]')) {
                            const activeCategories = [];
                            const checkboxes = categoryFilterContainer.querySelectorAll('input:checked');
                            checkboxes.forEach(cb => activeCategories.push(cb.dataset.categoryKey));

                            if (activeCategories.length === 0) {
                                categoryFilterFn = (item) => true;
                            } else {
                                categoryFilterFn = (item) => {
                                    return activeCategories.some(catKey => 
                                        COMPASS_UPGRADE_CATEGORIES[catKey].upgradeIndices.includes(item.index)
                                    );
                                };
                            }
                            updateAllUI();
                        }
                    });
                }
                
                itemListEl.innerHTML = itemsData.map(item => { const coin = coins[item.coin]; return `<div class="item-card card" id="${item.id}"><h3 title="${item.name}">${item.name}</h3><div class="info-row"><span>Next Cost: <span data-unlock-id="${item.id}" class="unlock-text"></span></span><span><strong data-cost-id="${item.id}">0</strong><img src="${coin.img}" title="${coin.name}" class="coin-icon-img"></span></div><div class="info-row"><span>Level:</span><div class="level-control"><button class="level-btn down" data-level-down-btn-id="${item.id}" data-change="-1">-</button><input type="text" data-level-input-id="${item.id}"><button class="level-btn" data-level-up-btn-id="${item.id}" data-change="1">+</button></div></div></div>`; }).join('');
                
                document.getElementById(`${id}-hide-locked-check`).checked = filters.hideLocked;
                document.getElementById(`${id}-hide-maxed-check`).checked = filters.hideMaxed;

                searchInputEl.addEventListener('input', applyAllFilters);
                document.getElementById(`${id}-hide-locked-check`).addEventListener('change', applyAllFilters);
                document.getElementById(`${id}-hide-maxed-check`).addEventListener('change', applyAllFilters);

                tabEl.addEventListener('click', e => { if (e.target.matches('.level-btn')) { e.preventDefault(); const btn = e.target; const itemId = btn.dataset.levelUpBtnId || btn.dataset.levelDownBtnId; const item = itemsData.find(i => i.id === itemId); if (!item) return; const change = parseInt(btn.dataset.change, 10); let currentLevel = levels[itemId] || 0; let newLevel = Math.max(0, currentLevel + change); if (item.maxLevel !== null) newLevel = Math.min(newLevel, item.maxLevel); if (newLevel !== currentLevel) { levels[itemId] = newLevel; saveLevels(); updateAllUI(); } } });
                tabEl.addEventListener('input', e => {
                    const target = e.target; const selectionStart = target.selectionStart; const originalLength = target.value.length; let valueSource = target.value; let updated = false;
                    if (target.dataset.levelInputId) { const itemId = target.dataset.levelInputId; const item = itemsData.find(i => i.id === itemId); let value = parseFormattedNumber(valueSource); if (item && item.maxLevel !== null) value = Math.min(value, item.maxLevel); levels[itemId] = value; saveLevels(); valueSource = value; updated = true; } 
                    else if (target.dataset.prodCoin) { const coinKey = target.dataset.prodCoin; const value = parseFormattedNumber(valueSource); productionRates[coinKey] = value; saveProductionRates(); valueSource = value; updated = true; }
                    else if (target.dataset.playerStat) { const statKey = target.dataset.playerStat; const value = target.type === 'checkbox' ? target.checked : parseFormattedNumber(valueSource); playerStats[statKey] = value; savePlayerStats(); valueSource = value; updated = true; }
                    if (updated) { if(target.type !== 'checkbox') { target.value = formatNumber(valueSource); if (document.activeElement === target && typeof selectionStart === 'number') { const newLength = target.value.length; target.selectionStart = target.selectionEnd = selectionStart + (newLength - originalLength); }} updateAllUI(); }
                });
                
                updateAllUI();
            };

            calculators[id] = {
                id, itemsData, storageKeys, playerStatFields,
                getLevels: () => levels, setLevels: (newLevels) => { levels = newLevels; },
                getPlayerStats: () => playerStats, setPlayerStats: (newStats) => { playerStats = newStats; },
                saveLevels, savePlayerStats, renderPlayerStats, updateAllUI
            };
            init();
        }

        document.addEventListener('DOMContentLoaded', () => {
            initializeCalculator({
                id: 'grimoire',
                productionTitle: 'Bones collection (/hr)',
                itemsData: transformedGrimoireData,
                coins: BONE_COINS,
                storageKeys: { levels: 'grimoire_levels', production: 'grimoire_production', filters: 'grimoire_filters' },
                costFn: (item, level) => { const { tier, base, expo } = item; if (level < 0) return 0; const tierMultiplier = 3 * Math.pow(1.05, tier); const levelMultiplier = level + (base + level) * Math.pow(expo + 0.01, level); return tierMultiplier * levelMultiplier; },
                unlockFn: (item, totalLevel) => totalLevel >= item.toUnlock
            });
            
            const TACHYON_MAP = ["purple", "brown", "green", "red", "silver", "gold"];
            const TESSERACT_ITEMS_DATA = TESSERACT_ITEMS_RAW_DATA.map((raw, index) => ({
                id: `t-item${index+1}`, index: index, name: raw.name.replace(/_/g, ' ').replace(/製/g, '').replace('(Tap for more info)','').trim(),
                base: raw.x1, expo: raw.x2, coin: TACHYON_MAP[raw.x3],
                maxLevel: raw.x4 === 999999 ? null : raw.x4, toUnlock: raw.x6,
            }));
            initializeCalculator({
                id: 'tesseract', productionTitle: 'Tachyons collection (/hr)', itemsData: TESSERACT_ITEMS_DATA, coins: TACHYON_COINS, 
                storageKeys: { levels: 'tesseract_levels', production: 'tesseract_production', playerStats: 'tesseract_playerStats', filters: 'tesseract_filters' },
                playerStatFields: { costReduction: { title: 'Player Stats (for Cost Reduction)', fields: { silverTachyons: { label: 'Silver Tachyons Owned' } }}},
                costFn: (item, currentLevel, playerStats, allLevels) => {
                    const lavaLog = (num) => Math.log(Math.max(num, 1)) / 2.30258509299;
                    const massivonLevel = allLevels['t-item54'] || 0; const silverTachyons = playerStats?.silverTachyons || 0;
                    const massivonBonus = massivonLevel * lavaLog(silverTachyons);
                    const costReductionDivisor = 1 + (massivonBonus / 100);
                    if (currentLevel < 0) return 0; const { base, expo, index } = item;
                    const baseCost = 3 * Math.pow(1.04, index) * (currentLevel + (base + currentLevel) * Math.pow(expo + 0.01, currentLevel));
                    return baseCost / costReductionDivisor;
                },
                unlockFn: (item, totalLevel) => totalLevel >= item.toUnlock
            });

            const serverVars = { DustCost: 6.2 };
            const randomList = {
                105: "3 2 4 5 106 8 12 6 7 107 118 10 110 116 9 113 11 114 109 108 117 115 112 111".split(' '),
                106: "14 17 119 18 120 16 15 21 122 124 19 123 20 121 22 129 125 130 134 128 127 133 24 25 132 131 23 135 26 136 126".split(' '),
                107: "28 29 139 35 137 30 142 34 140 141 32 145 31 37 138 38 146 33 144 36 148 147 150 149 39 143".split(' '),
                108: "42 41 43 44 45 154 151 47 152 49 48 155 46 52 50 157 53 158 153 56 51 156 164 55 163 57 162 159 167 54 161 58 166 160 165 168 169 59".split(' '),
                109: "60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105".split(' ')
            };

            const elemental = randomList[105].map(Number);
            const fighter = randomList[106].map(Number);
            const survival = randomList[107].map(Number);
            const nomadic = randomList[108].map(Number);
            const abomination = randomList[109].map(Number);

            const COMPASS_ITEMS_DATA = COMPASS_ITEMS_RAW_DATA.map((raw, index) => {
                const itemIndex1Based = index + 1;
                const name = raw.name.replace(/_/g, ' ').replace('@', '<br>');
                const pathName = ["Elemental", "Fighter", "Survival", "Nomadic", "Abominations"][raw.x10];
                const abomArrayIndex = abomination.indexOf(index);
                const abomName = abomArrayIndex !== -1 && abomArrayIndex < ABOMINATIONS_DATA.length
                    ? ABOMINATIONS_DATA[abomArrayIndex].name.replace(/_/g, ' ')
                    : null;
                
                let pathUnlockLevel = null;
                let pathArray;
                switch(pathName) {
                    case "Elemental": pathArray = elemental; break;
                    case "Fighter":   pathArray = fighter;   break;
                    case "Survival":  pathArray = survival;  break;
                    case "Nomadic":   pathArray = nomadic;   break;
                }

                if (pathArray) {
                    const positionInPath = pathArray.indexOf(index);
                    if (positionInPath !== -1) {
                        pathUnlockLevel = positionInPath + 1;
                    }
                }
                
                return {
                    id: `c-item${itemIndex1Based}`,
                    index: index, name: name,
                    base: raw.x1, expo: raw.x2, x5: raw.x5,
                    isCircle: raw.x9 === 1,
                    coin: ["stardust", "moondust", "sundust", "cooldust", "novadust"][raw.x3],
                    maxLevel: raw.x4 === 999999 ? null : raw.x4,
                    pathName: pathName,
                    pathIndex: ["Elemental", "Fighter", "Survival", "Nomadic", "Abominations"].indexOf(pathName),
                    pathUnlockLevel: pathUnlockLevel,
                    abomIndex: abomArrayIndex,
                    abomName: abomName
                };
            });

            const abominationFields = {};
            ABOMINATIONS_DATA.slice(0, abomination.length).forEach((abom, index) => {
                abominationFields[`abom_${index}`] = { label: abom.name.replace(/_/g, ' '), type: 'checkbox', default: false };
            });
            
            const getLocalCompassBonus = (allLevels, allItems, targetIndex) => {
                const targetItem = allItems.find(i => i.index === targetIndex);
                if (!targetItem) return 0;
                
                const level = allLevels[targetItem.id] || 0;
                let baseBonus = level * targetItem.x5;

                if (targetIndex === 45) {
                    baseBonus *= Math.pow(2, Math.floor(level / 50));
                }

                if (targetItem.isCircle) {
                    const circleSupremacyBonus = getLocalCompassBonus(allLevels, allItems, 39);
                    const abom21Bonus = getLocalCompassBonus(allLevels, allItems, 80);
                    const multiplier = 1 + (circleSupremacyBonus + abom21Bonus) / 100;
                    return baseBonus * multiplier;
                }
                return baseBonus;
            };

            initializeCalculator({
                id: 'compass',
                productionTitle: 'Dust collection (/hr)',
                itemsData: COMPASS_ITEMS_DATA,
                coins: COMPASS_COINS,
                storageKeys: { levels: 'compass_levels', production: 'compass_production', playerStats: 'compass_playerStats', filters: 'compass_filters' },
                playerStatFields: {
                    manualUnlocks: {
                        title: 'Slain Abominations',
                        fields: abominationFields,
                        gridClass: 'manual-unlock-grid'
                    }
                },
                costFn: (item, level, playerStats, allLevels) => {
                    const getBonus = (index) => getLocalCompassBonus(allLevels, COMPASS_ITEMS_DATA, index);
                    
                    let redCostDivisor = 1; let surplusCost = 0;
                    
                    switch (item.index) {
                        case 45: redCostDivisor = 1 + (getBonus(151) + getBonus(152) + getBonus(154)) / 100; break;
                        case 43: redCostDivisor = 1 + (getBonus(153) + getBonus(156)) / 100; break;
                        case 48: redCostDivisor = 1 + (getBonus(155) + getBonus(157) + getBonus(158)) / 100; break;
                        case 57: redCostDivisor = 1 + (getBonus(159) + getBonus(160) + getBonus(161) + getBonus(168)) / 100; break;
                        case 51: redCostDivisor = 1 + (getBonus(162) + getBonus(163) + getBonus(164) + getBonus(166) + getBonus(167)) / 100; break;
                        case 54: redCostDivisor = 1 + (getBonus(165) + getBonus(169)) / 100; break;
                    }

                    if (item.name.endsWith(" Path")) {
                        surplusCost = (Math.pow(3 * level, 2) + 12 * level) * Math.pow(1.1, level);
                    }
                    
                    const dustCost = Math.max(serverVars.DustCost, 1);
                    const bonusReductionDivisor = 1 + (getBonus(36) + getBonus(77)) / 100;
                    
                    const randoListKey = 105 + item.pathIndex;
                    const randoListForPath = randomList[randoListKey];
                    let randoMultiplier = 1;

                    if (randoListForPath) {
                        const positionInList = randoListForPath.indexOf(String(item.index));
                        if (positionInList !== -1) {
                            randoMultiplier = Math.max(1, Math.pow(3.2 - randoListForPath.length / 60, positionInList));
                        }
                    }

                    const finalCost = surplusCost + dustCost * (1 / bonusReductionDivisor) * (1 / Math.max(1, redCostDivisor)) * (item.base / 2) * randoMultiplier * Math.pow(item.expo, level);
                    return Math.max(1, Math.floor(finalCost));
                },
                unlockFn: (item, totalLevel, allLevels, playerStats) => {
                    if (item.name === 'Pathfinder' || item.name === 'Worldfinder' || item.name === 'Stop Drop and Roll' || item.name === "Grumblo's Guarantee" || item.name.endsWith(" Path")) {
                        return true;
                    }

                    if (item.pathName === "Abominations") {
                        return item.abomIndex !== -1 && (playerStats[`abom_${item.abomIndex}`] || false);
                    }
                    
                    if (item.pathUnlockLevel === null) return false;

                    let controlItemId;
                    switch(item.pathName) {
                        case "Elemental": controlItemId = 'c-item2'; break;
                        case "Fighter":   controlItemId = 'c-item14'; break;
                        case "Survival":  controlItemId = 'c-item28'; break;
                        case "Nomadic":   controlItemId = 'c-item41'; break;
                        default: return false;
                    }

                    const pathLevel = allLevels[controlItemId] || 0;
                    return pathLevel >= item.pathUnlockLevel;
                }
            });
            
            document.getElementById('import-submit-btn').addEventListener('click', () => {
                const jsonText = document.getElementById('import-textarea').value;
                if (!jsonText) { return alert('Textarea is empty.'); }
                try {
                    const importedData = JSON.parse(jsonText);

                    if (importedData.Grimoire && calculators.grimoire) {
                        const newLevels = {};
                        calculators.grimoire.itemsData.forEach((item, index) => {
                            newLevels[item.id] = importedData.Grimoire[index] || 0;
                        });
                        calculators.grimoire.setLevels(newLevels);
                        calculators.grimoire.saveLevels();
                        calculators.grimoire.updateAllUI();
                    }

                    if (importedData.Arcane && calculators.tesseract) {
                        const newLevels = {};
                        calculators.tesseract.itemsData.forEach((item, index) => {
                            newLevels[item.id] = importedData.Arcane[index] || 0;
                        });
                        calculators.tesseract.setLevels(newLevels);
                        calculators.tesseract.saveLevels();
                        calculators.tesseract.updateAllUI();
                    }

                    if (importedData.Compass && calculators.compass) {
                        let compassData;
                        if (typeof importedData.Compass === 'string') {
                            try {
                                compassData = JSON.parse(importedData.Compass);
                            } catch (e) {
                                console.error("Could not parse the 'Compass' data string:", e);
                                alert("The Compass data in the JSON is malformed.");
                                return;
                            }
                        } else {
                            compassData = importedData.Compass;
                        }
                        
                        const compassLevels = compassData[0] || [];
                        const abominationStatus = compassData[1] || [];
                        
                        const newLevels = {};
                        calculators.compass.itemsData.forEach((item, index) => {
                            newLevels[item.id] = compassLevels[index] || 0;
                        });
                        calculators.compass.setLevels(newLevels);
                        calculators.compass.saveLevels();

                        const newStats = calculators.compass.getPlayerStats();
                        abominationStatus.forEach((status, index) => {
                            const key = `abom_${index}`;
                            newStats[key] = (status === 1);
                        });
                        calculators.compass.setPlayerStats(newStats);
                        calculators.compass.savePlayerStats();
                        
                        calculators.compass.renderPlayerStats();
                        calculators.compass.updateAllUI();
                    }
                    
                    alert('Data imported successfully!');

                } catch (e) {
                    alert('Invalid JSON data. Please check the format and try again.\n\nError: ' + e.message);
                }
            });
        });
    </script>
</body>
</html>